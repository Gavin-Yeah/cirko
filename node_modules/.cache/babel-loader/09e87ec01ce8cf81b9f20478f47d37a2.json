{"ast":null,"code":"import \"antd-mobile/lib/list-view/style\";\nimport _ListView from \"antd-mobile/lib/list-view\";\nimport _defineProperty from \"/Users/jiadaye/workspace/cirko/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/jiadaye/workspace/cirko/src/components/PostPage/index.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nconst data = [{\n  img: 'https://zos.alipayobjects.com/rmsportal/dKbkpPXKfvZzWCM.png',\n  title: 'a',\n  des: '不是所有的兼职汪都需要风吹日晒'\n}, {\n  img: 'https://zos.alipayobjects.com/rmsportal/XmwCzSeJiqpkuMB.png',\n  title: 'b',\n  des: '不是所有的兼职汪都需要风吹日晒'\n}, {\n  img: 'https://zos.alipayobjects.com/rmsportal/hfVtzEhPzTUewPm.png',\n  title: 'c',\n  des: '不是所有的兼职汪都需要风吹日晒'\n}, {\n  img: 'https://zos.alipayobjects.com/rmsportal/dKbkpPXKfvZzWCM.png',\n  title: 'd',\n  des: '不是所有的兼职汪都需要风吹日晒'\n}, {\n  img: 'https://zos.alipayobjects.com/rmsportal/XmwCzSeJiqpkuMB.png',\n  title: 'e',\n  des: '不是所有的兼职汪都需要风吹日晒'\n}, {\n  img: 'https://zos.alipayobjects.com/rmsportal/hfVtzEhPzTUewPm.png',\n  title: 'f',\n  des: '不是所有的兼职汪都需要风吹日晒'\n}, {\n  img: 'https://zos.alipayobjects.com/rmsportal/dKbkpPXKfvZzWCM.png',\n  title: 'g',\n  des: '不是所有的兼职汪都需要风吹日晒'\n}, {\n  img: 'https://zos.alipayobjects.com/rmsportal/XmwCzSeJiqpkuMB.png',\n  title: 'h',\n  des: '不是所有的兼职汪都需要风吹日晒'\n}, {\n  img: 'https://zos.alipayobjects.com/rmsportal/hfVtzEhPzTUewPm.png',\n  title: 'i',\n  des: '不是所有的兼职汪都需要风吹日晒'\n}, {\n  img: 'https://zos.alipayobjects.com/rmsportal/dKbkpPXKfvZzWCM.png',\n  title: 'j',\n  des: '不是所有的兼职汪都需要风吹日晒'\n}, {\n  img: 'https://zos.alipayobjects.com/rmsportal/XmwCzSeJiqpkuMB.png',\n  title: 'k',\n  des: '不是所有的兼职汪都需要风吹日晒'\n}, {\n  img: 'https://zos.alipayobjects.com/rmsportal/hfVtzEhPzTUewPm.png',\n  title: 'l',\n  des: '不是所有的兼职汪都需要风吹日晒'\n}];\nconst NUM_ROWS = 20;\nlet pageIndex = 0;\n\nfunction genData(pIndex = 0) {\n  const dataBlob = {};\n\n  for (let i = 0; i < NUM_ROWS; i++) {\n    const ii = pIndex * NUM_ROWS + i;\n    dataBlob[\"\".concat(ii)] = \"row - \".concat(ii);\n  }\n\n  return dataBlob;\n}\n\nclass PostPage extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.onEndReached = event => {\n      // load new data\n      // hasMore: from backend data, indicates whether it is the last page, here is false\n      if (this.state.isLoading && !this.state.hasMore) {\n        return;\n      }\n\n      console.log('reach end', event);\n      this.setState({\n        isLoading: true\n      });\n      this.timeId2 = setTimeout(() => {\n        this.rData = _objectSpread({}, this.rData, {}, genData(++pageIndex));\n        this.setState({\n          dataSource: this.state.dataSource.cloneWithRows(this.rData),\n          isLoading: false\n        });\n      }, 1000);\n    };\n\n    const dataSource = new _ListView.DataSource({\n      rowHasChanged: (row1, row2) => row1 !== row2\n    });\n    this.state = {\n      dataSource,\n      isLoading: true\n    };\n  }\n\n  componentDidMount() {\n    // you can scroll to the specified position\n    // setTimeout(() => this.lv.scrollTo(0, 120), 800);\n    // simulate initial Ajax\n    this.timeId1 = setTimeout(() => {\n      this.rData = genData();\n      this.setState({\n        dataSource: this.state.dataSource.cloneWithRows(this.rData),\n        isLoading: false\n      });\n    }, 600);\n  }\n\n  componentWillUnmount() {\n    clearTimeout(this.timeId1);\n    clearTimeout(this.timeId2);\n  }\n\n  render() {\n    const separator = (sectionID, rowID) => React.createElement(\"div\", {\n      key: \"\".concat(sectionID, \"-\").concat(rowID),\n      style: {\n        backgroundColor: '#F5F5F9',\n        height: 8,\n        borderTop: '1px solid #ECECED',\n        borderBottom: '1px solid #ECECED'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    });\n\n    let index = data.length - 1;\n\n    const row = (rowData, sectionID, rowID) => {\n      if (index < 0) {\n        index = data.length - 1;\n      }\n\n      const obj = data[index--];\n      return React.createElement(\"div\", {\n        key: rowID,\n        style: {\n          padding: '0 15px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        style: {\n          lineHeight: '50px',\n          color: '#888',\n          fontSize: 18,\n          borderBottom: '1px solid #F6F6F6'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }, obj.title), React.createElement(\"div\", {\n        style: {\n          display: '-webkit-box',\n          display: 'flex',\n          padding: '15px 0'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        style: {\n          height: '64px',\n          marginRight: '15px'\n        },\n        src: obj.img,\n        alt: \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        style: {\n          lineHeight: 1\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        style: {\n          marginBottom: '8px',\n          fontWeight: 'bold'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      }, obj.des), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        style: {\n          fontSize: '30px',\n          color: '#FF6E27'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164\n        },\n        __self: this\n      }, rowID), \"\\xA5\"))));\n    };\n\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171\n      },\n      __self: this\n    }, React.createElement(_ListView, {\n      ref: el => this.lv = el,\n      dataSource: this.state.dataSource,\n      renderHeader: () => React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176\n        },\n        __self: this\n      }, \"header\"),\n      renderFooter: () => React.createElement(\"div\", {\n        style: {\n          padding: 30,\n          textAlign: 'center'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177\n        },\n        __self: this\n      }, this.state.isLoading ? 'Loading...' : 'Loaded'),\n      renderRow: row,\n      renderSeparator: separator,\n      className: \"am-list\",\n      pageSize: 4,\n      useBodyScroll: true,\n      onScroll: () => {\n        console.log('scroll');\n      },\n      scrollRenderAheadDistance: 500,\n      onEndReached: this.onEndReached,\n      onEndReachedThreshold: 10,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default PostPage;","map":{"version":3,"sources":["/Users/jiadaye/workspace/cirko/src/components/PostPage/index.js"],"names":["React","ReactDOM","data","img","title","des","NUM_ROWS","pageIndex","genData","pIndex","dataBlob","i","ii","PostPage","Component","constructor","props","onEndReached","event","state","isLoading","hasMore","console","log","setState","timeId2","setTimeout","rData","dataSource","cloneWithRows","DataSource","rowHasChanged","row1","row2","componentDidMount","timeId1","componentWillUnmount","clearTimeout","render","separator","sectionID","rowID","backgroundColor","height","borderTop","borderBottom","index","length","row","rowData","obj","padding","lineHeight","color","fontSize","display","marginRight","marginBottom","fontWeight","el","lv","textAlign"],"mappings":"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","sourcesContent":["import {TabBar, ListView, NavBar} from 'antd-mobile';\nimport React from 'react'\nimport ReactDOM from 'react-dom'\n\nconst data = [\n    {\n        img: 'https://zos.alipayobjects.com/rmsportal/dKbkpPXKfvZzWCM.png',\n        title: 'a',\n        des: '不是所有的兼职汪都需要风吹日晒',\n    },\n    {\n        img: 'https://zos.alipayobjects.com/rmsportal/XmwCzSeJiqpkuMB.png',\n        title: 'b',\n        des: '不是所有的兼职汪都需要风吹日晒',\n    },\n    {\n        img: 'https://zos.alipayobjects.com/rmsportal/hfVtzEhPzTUewPm.png',\n        title: 'c',\n        des: '不是所有的兼职汪都需要风吹日晒',\n    },\n    {\n        img: 'https://zos.alipayobjects.com/rmsportal/dKbkpPXKfvZzWCM.png',\n        title: 'd',\n        des: '不是所有的兼职汪都需要风吹日晒',\n    },\n    {\n        img: 'https://zos.alipayobjects.com/rmsportal/XmwCzSeJiqpkuMB.png',\n        title: 'e',\n        des: '不是所有的兼职汪都需要风吹日晒',\n    },\n    {\n        img: 'https://zos.alipayobjects.com/rmsportal/hfVtzEhPzTUewPm.png',\n        title: 'f',\n        des: '不是所有的兼职汪都需要风吹日晒',\n    },\n    {\n        img: 'https://zos.alipayobjects.com/rmsportal/dKbkpPXKfvZzWCM.png',\n        title: 'g',\n        des: '不是所有的兼职汪都需要风吹日晒',\n    },\n    {\n        img: 'https://zos.alipayobjects.com/rmsportal/XmwCzSeJiqpkuMB.png',\n        title: 'h',\n        des: '不是所有的兼职汪都需要风吹日晒',\n    },\n    {\n        img: 'https://zos.alipayobjects.com/rmsportal/hfVtzEhPzTUewPm.png',\n        title: 'i',\n        des: '不是所有的兼职汪都需要风吹日晒',\n    },\n    {\n        img: 'https://zos.alipayobjects.com/rmsportal/dKbkpPXKfvZzWCM.png',\n        title: 'j',\n        des: '不是所有的兼职汪都需要风吹日晒',\n    },\n    {\n        img: 'https://zos.alipayobjects.com/rmsportal/XmwCzSeJiqpkuMB.png',\n        title: 'k',\n        des: '不是所有的兼职汪都需要风吹日晒',\n    },\n    {\n        img: 'https://zos.alipayobjects.com/rmsportal/hfVtzEhPzTUewPm.png',\n        title: 'l',\n        des: '不是所有的兼职汪都需要风吹日晒',\n    },\n];\nconst NUM_ROWS = 20;\nlet pageIndex = 0;\n\n\n\nfunction genData(pIndex = 0) {\n    const dataBlob = {};\n    for (let i = 0; i < NUM_ROWS; i++) {\n        const ii = (pIndex * NUM_ROWS) + i;\n        dataBlob[`${ii}`] = `row - ${ii}`;\n    }\n    return dataBlob;\n}\n\nclass PostPage extends React.Component {\n\n    constructor(props) {\n        super(props);\n        const dataSource = new ListView.DataSource({\n            rowHasChanged: (row1, row2) => row1 !== row2,\n        });\n\n        this.state = {\n            dataSource,\n            isLoading: true,\n        };\n    }\n\n\n    componentDidMount() {\n        // you can scroll to the specified position\n        // setTimeout(() => this.lv.scrollTo(0, 120), 800);\n\n        // simulate initial Ajax\n        this.timeId1 = setTimeout(() => {\n            this.rData = genData();\n            this.setState({\n                dataSource: this.state.dataSource.cloneWithRows(this.rData),\n                isLoading: false,\n            });\n        }, 600);\n    }\n\n    onEndReached = (event) => {\n        // load new data\n        // hasMore: from backend data, indicates whether it is the last page, here is false\n        if (this.state.isLoading && !this.state.hasMore) {\n            return;\n        }\n        console.log('reach end', event);\n        this.setState({isLoading: true});\n        this.timeId2 = setTimeout(() => {\n            this.rData = {...this.rData, ...genData(++pageIndex)};\n            this.setState({\n                dataSource: this.state.dataSource.cloneWithRows(this.rData),\n                isLoading: false,\n            });\n        }, 1000);\n    }\n\n    componentWillUnmount() {\n        clearTimeout(this.timeId1);\n        clearTimeout(this.timeId2);\n    }\n\n    render() {\n        const separator = (sectionID, rowID) => (\n            <div\n                key={`${sectionID}-${rowID}`}\n                style={{\n                    backgroundColor: '#F5F5F9',\n                    height: 8,\n                    borderTop: '1px solid #ECECED',\n                    borderBottom: '1px solid #ECECED',\n                }}\n            />\n        );\n        let index = data.length - 1;\n        const row = (rowData, sectionID, rowID) => {\n            if (index < 0) {\n                index = data.length - 1;\n            }\n            const obj = data[index--];\n            return (\n                <div key={rowID} style={{padding: '0 15px'}}>\n                    <div\n                        style={{\n                            lineHeight: '50px',\n                            color: '#888',\n                            fontSize: 18,\n                            borderBottom: '1px solid #F6F6F6',\n                        }}\n                    >{obj.title}</div>\n                    <div style={{display: '-webkit-box', display: 'flex', padding: '15px 0'}}>\n                        <img style={{height: '64px', marginRight: '15px'}} src={obj.img} alt=\"\"/>\n                        <div style={{lineHeight: 1}}>\n                            <div style={{marginBottom: '8px', fontWeight: 'bold'}}>{obj.des}</div>\n                            <div><span style={{fontSize: '30px', color: '#FF6E27'}}>{rowID}</span>¥</div>\n                        </div>\n                    </div>\n                </div>\n            );\n        };\n        return (\n            <div>\n\n                <ListView\n                    ref={el => this.lv = el}\n                    dataSource={this.state.dataSource}\n                    renderHeader={() => <span>header</span>}\n                    renderFooter={() => (<div style={{padding: 30, textAlign: 'center'}}>\n                        {this.state.isLoading ? 'Loading...' : 'Loaded'}\n                    </div>)}\n                    renderRow={row}\n                    renderSeparator={separator}\n                    className=\"am-list\"\n                    pageSize={4}\n                    useBodyScroll\n                    onScroll={() => {\n                        console.log('scroll');\n                    }}\n                    scrollRenderAheadDistance={500}\n                    onEndReached={this.onEndReached}\n                    onEndReachedThreshold={10}\n                />\n            </div>\n        );\n    }\n}\n\nexport default PostPage;"]},"metadata":{},"sourceType":"module"}