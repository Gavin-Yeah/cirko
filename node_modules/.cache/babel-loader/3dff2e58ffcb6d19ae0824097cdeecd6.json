{"ast":null,"code":"import \"antd-mobile/lib/nav-bar/style\";\nimport _NavBar from \"antd-mobile/lib/nav-bar\";\nimport \"antd-mobile/lib/flex/style\";\nimport _Flex from \"antd-mobile/lib/flex\";\nimport \"antd-mobile/lib/list-view/style\";\nimport _ListView from \"antd-mobile/lib/list-view\";\nimport _defineProperty from \"/Users/jiadaye/workspace/cirko/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/jiadaye/workspace/cirko/src/components/Comments/index.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { NavLink } from \"react-router-dom\";\nimport * as ROUTES from '../../constants/routes';\nimport add from \"../icons/add.png\";\nconst data = [{\n  title: 'Meet hotel',\n  des: '不是所有的兼职汪都需要风吹日晒',\n  time: '02/29/2010',\n  id: 1\n}, {\n  title: 'McDonald\\'s invites you',\n  des: '不是所有的兼职汪都需要风吹日晒',\n  time: '02/29/2010',\n  id: 2\n}, {\n  title: 'Eat the week',\n  des: '不是所有的兼职汪都需要风吹日晒',\n  time: '02/29/2010',\n  id: 3\n}];\nconst NUM_SECTIONS = 5;\nconst NUM_ROWS_PER_SECTION = 5;\nlet pageIndex = 0;\nconst NUM_ROWS = 20;\nconst dataBlobs = {};\nlet sectionIDs = [];\nlet rowIDs = [];\n\nfunction genData(pIndex = 0) {\n  const dataBlob = {};\n\n  for (let i = 0; i < NUM_ROWS; i++) {\n    const ii = pIndex * NUM_ROWS + i;\n    dataBlob[\"\".concat(ii)] = \"row - \".concat(ii);\n  }\n\n  return dataBlob;\n}\n\nexport default class Comments extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.onEndReached = event => {\n      // load new data\n      // hasMore: from backend data, indicates whether it is the last page, here is false\n      if (this.state.isLoading && !this.state.hasMore) {\n        return;\n      }\n\n      console.log('reach end', event);\n      this.setState({\n        isLoading: true\n      });\n      setTimeout(() => {\n        this.rData = _objectSpread({}, this.rData, {}, genData(++pageIndex));\n        this.setState({\n          dataSource: this.state.dataSource.cloneWithRows(this.rData),\n          isLoading: false\n        });\n      }, 1000);\n    };\n\n    this.onClickAdd = () => {\n      //console.log(this.props.match.params.id)\n      this.props.history.push(\"/addcomment/\".concat(this.props.match.params.id));\n    };\n\n    const getSectionData = (dataBlob, sectionID) => dataBlob[sectionID];\n\n    const getRowData = (dataBlob, sectionID, rowID) => dataBlob[rowID];\n\n    const dataSource = new _ListView.DataSource({\n      getRowData,\n      getSectionHeaderData: getSectionData,\n      rowHasChanged: (row1, row2) => row1 !== row2,\n      sectionHeaderHasChanged: (s1, s2) => s1 !== s2\n    });\n    this.state = {\n      dataSource,\n      isLoading: true,\n      height: document.documentElement.clientHeight\n    };\n  }\n\n  componentDidMount() {\n    // you can scroll to the specified position\n    // setTimeout(() => this.lv.scrollTo(0, 120), 800);\n    // simulate initial Ajax\n    setTimeout(() => {\n      this.rData = genData();\n      this.setState({\n        dataSource: this.state.dataSource.cloneWithRows(this.rData),\n        isLoading: false\n      });\n    }, 600);\n  }\n\n  render() {\n    const separator = (sectionID, rowID) => React.createElement(\"div\", {\n      key: \"\".concat(sectionID, \"-\").concat(rowID),\n      style: {\n        backgroundColor: '#F5F5F9',\n        height: 8,\n        borderTop: '1px solid #ECECED',\n        borderBottom: '1px solid #ECECED'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    });\n\n    let index = data.length - 1;\n\n    const row = (rowData, sectionID, rowID) => {\n      if (index < 0) {\n        index = data.length - 1;\n      }\n\n      const obj = data[index--];\n      return React.createElement(\"div\", {\n        key: rowID,\n        style: {\n          padding: '0 15px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }, rowID == 0 ? React.createElement(\"div\", {\n        style: {\n          height: '70px',\n          background: 'white'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }) : React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      })\n      /*show the 1st post completely*/\n      , React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }, React.createElement(_Flex, {\n        style: {\n          padding: '15px 0'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        style: {\n          height: '64px',\n          marginRight: '15px'\n        },\n        src: obj.img,\n        alt: \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        style: {\n          lineHeight: 1\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        style: {\n          fontSize: '20px',\n          color: '#4e77a1',\n          fontWeight: 'bold'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }, obj.title)), React.createElement(\"div\", {\n        style: {\n          color: '#5396a5',\n          fontSize: '18px',\n          marginBottom: '8px',\n          marginTop: '5px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }, obj.time))), React.createElement(_Flex, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        style: {\n          marginBottom: '8px',\n          fontWeight: 'bold'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      }, obj.des))));\n    };\n\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }, React.createElement(_NavBar, {\n      style: {\n        backgroundColor: '#5396a5',\n        borderBottomLeftRadius: '100%',\n        borderBottomRightRadius: '100%',\n        height: \"70px\",\n        position: 'fixed',\n        width: \"100%\",\n        top: 0,\n        zIndex: 1\n      },\n      mode: \"light\",\n      leftContent: React.createElement(\"div\", {\n        onClick: () => this.props.history.goBack(),\n        style: {\n          width: '40px',\n          marginTop: \"-20px\",\n          marginLeft: '10px',\n          color: 'White',\n          fontSize: '40px',\n          fontWeight: 'bold'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162\n        },\n        __self: this\n      }, \" <\"),\n      rightContent: React.createElement(\"div\", {\n        onClick: this.onClickAdd,\n        style: {\n          width: '40px',\n          marginTop: \"-20px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: add,\n        style: {\n          width: \"50px\"\n        },\n        alt: \"add\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168\n        },\n        __self: this\n      })),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      style: {\n        color: \"white\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172\n      },\n      __self: this\n    }, \"comments\")), React.createElement(_ListView, {\n      ref: el => this.lv = el,\n      dataSource: this.state.dataSource,\n      renderFooter: () => React.createElement(\"div\", {\n        style: {\n          padding: 30,\n          textAlign: 'center'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177\n        },\n        __self: this\n      }, this.state.isLoading ? 'Loading...' : 'Loaded'),\n      renderRow: row,\n      renderSeparator: separator,\n      style: {\n        height: this.state.height,\n        overflow: 'auto'\n      },\n      className: \"am-list\",\n      pageSize: 4,\n      onScroll: () => {\n        console.log('scroll');\n      },\n      scrollRenderAheadDistance: 500,\n      onEndReached: this.onEndReached,\n      onEndReachedThreshold: 10,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    }));\n  }\n\n}","map":{"version":3,"sources":["/Users/jiadaye/workspace/cirko/src/components/Comments/index.js"],"names":["React","ReactDOM","NavLink","ROUTES","add","data","title","des","time","id","NUM_SECTIONS","NUM_ROWS_PER_SECTION","pageIndex","NUM_ROWS","dataBlobs","sectionIDs","rowIDs","genData","pIndex","dataBlob","i","ii","Comments","Component","constructor","props","onEndReached","event","state","isLoading","hasMore","console","log","setState","setTimeout","rData","dataSource","cloneWithRows","onClickAdd","history","push","match","params","getSectionData","sectionID","getRowData","rowID","DataSource","getSectionHeaderData","rowHasChanged","row1","row2","sectionHeaderHasChanged","s1","s2","height","document","documentElement","clientHeight","componentDidMount","render","separator","backgroundColor","borderTop","borderBottom","index","length","row","rowData","obj","padding","background","marginRight","img","lineHeight","fontSize","color","fontWeight","marginBottom","marginTop","borderBottomLeftRadius","borderBottomRightRadius","position","width","top","zIndex","goBack","marginLeft","el","lv","textAlign","overflow"],"mappings":"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","sourcesContent":["import { Button, Flex, Icon, ListView, NavBar, TabBar } from 'antd-mobile';\nimport React from \"react\";\nimport ReactDOM from \"react-dom\"\nimport { NavLink } from \"react-router-dom\";\nimport * as ROUTES from '../../constants/routes'\nimport add from \"../icons/add.png\";\n\nconst data = [\n    {\n\n        title: 'Meet hotel',\n        des: '不是所有的兼职汪都需要风吹日晒',\n        time: '02/29/2010',\n        id: 1,\n    },\n    {\n\n        title: 'McDonald\\'s invites you',\n        des: '不是所有的兼职汪都需要风吹日晒',\n        time: '02/29/2010',\n        id: 2,\n    },\n    {\n\n        title: 'Eat the week',\n        des: '不是所有的兼职汪都需要风吹日晒',\n        time: '02/29/2010',\n        id: 3,\n    },\n];\nconst NUM_SECTIONS = 5;\nconst NUM_ROWS_PER_SECTION = 5;\nlet pageIndex = 0;\nconst NUM_ROWS = 20;\nconst dataBlobs = {};\nlet sectionIDs = [];\nlet rowIDs = [];\n\nfunction genData(pIndex = 0) {\n    const dataBlob = {};\n    for (let i = 0; i < NUM_ROWS; i++) {\n        const ii = (pIndex * NUM_ROWS) + i;\n        dataBlob[`${ii}`] = `row - ${ii}`;\n    }\n    return dataBlob;\n}\n\nexport default class Comments extends React.Component {\n    constructor(props) {\n        super(props);\n\n        const getSectionData = (dataBlob, sectionID) => dataBlob[sectionID];\n        const getRowData = (dataBlob, sectionID, rowID) => dataBlob[rowID];\n\n        const dataSource = new ListView.DataSource({\n            getRowData,\n            getSectionHeaderData: getSectionData,\n            rowHasChanged: (row1, row2) => row1 !== row2,\n            sectionHeaderHasChanged: (s1, s2) => s1 !== s2,\n        });\n\n        this.state = {\n            dataSource,\n            isLoading: true,\n            height: document.documentElement.clientHeight,\n        };\n    }\n\n    componentDidMount() {\n        // you can scroll to the specified position\n        // setTimeout(() => this.lv.scrollTo(0, 120), 800);\n\n        // simulate initial Ajax\n        setTimeout(() => {\n            this.rData = genData();\n            this.setState({\n                dataSource: this.state.dataSource.cloneWithRows(this.rData),\n                isLoading: false,\n            });\n        }, 600);\n    }\n\n    onEndReached = (event) => {\n        // load new data\n        // hasMore: from backend data, indicates whether it is the last page, here is false\n        if (this.state.isLoading && !this.state.hasMore) {\n            return;\n        }\n        console.log('reach end', event);\n        this.setState({isLoading: true});\n        setTimeout(() => {\n            this.rData = {...this.rData, ...genData(++pageIndex)};\n            this.setState({\n                dataSource: this.state.dataSource.cloneWithRows(this.rData),\n                isLoading: false,\n            });\n        }, 1000);\n    }\n\n\n    onClickAdd = () => {\n        //console.log(this.props.match.params.id)\n        this.props.history.push(`/addcomment/${this.props.match.params.id}`);\n    }\n\n    render() {\n        const separator = (sectionID, rowID) => (\n            <div\n                key={`${sectionID}-${rowID}`}\n                style={{\n                    backgroundColor: '#F5F5F9',\n                    height: 8,\n                    borderTop: '1px solid #ECECED',\n                    borderBottom: '1px solid #ECECED',\n                }}\n            />\n        );\n        let index = data.length - 1;\n        const row = (rowData, sectionID, rowID) => {\n            if (index < 0) {\n                index = data.length - 1;\n            }\n            const obj = data[index--];\n            return (\n                <div key={rowID} style={{padding: '0 15px'}}>\n                    {rowID==0?  <div style={{height:'70px' ,background:'white'}}></div>:<div/> /*show the 1st post completely*/}\n\n\n                    <div>\n                        <Flex style={{padding: '15px 0'}}>\n                            <img style={{height: '64px', marginRight: '15px'}} src={obj.img} alt=\"\"/>\n                            <div style={{lineHeight: 1}}>\n\n                                <div><span\n                                    style={{fontSize: '20px', color: '#4e77a1', fontWeight: 'bold'}}>{obj.title}</span>\n                                </div>\n                                <div style={{\n                                    color: '#5396a5',\n                                    fontSize: '18px',\n                                    marginBottom: '8px',\n                                    marginTop: '5px'\n                                }}>{obj.time}</div>\n                            </div>\n                        </Flex>\n                        <Flex>\n                            <div style={{marginBottom: '8px', fontWeight: 'bold'}}>{obj.des}</div>\n                        </Flex>\n                    </div>\n                    {/*<Flex>*/}\n\n                    {/*    <Flex.Item><Button>Like</Button></Flex.Item>*/}\n                    {/*</Flex>*/}\n                </div>\n            );\n        };\n        return (\n            <div>\n                <NavBar\n                    style={{backgroundColor: '#5396a5', borderBottomLeftRadius:'100%', borderBottomRightRadius:'100%',  height:\"70px\",position:'fixed',width:\"100%\", top:0,zIndex:1}}\n                    mode=\"light\"\n                    leftContent={\n                        <div onClick={()=>  this.props.history.goBack()}  style={{width: '40px',marginTop:\"-20px\", marginLeft:'10px', color:'White', fontSize:'40px',fontWeight: 'bold'}}> &lt;\n                    </div>\n                        }\n\n\n                    rightContent={\n                        <div onClick={this.onClickAdd}  style={{width: '40px',marginTop:\"-20px\",}}><img src={add} style={{width:\"50px\"}} alt=\"add\"/>\n                        </div>\n\n                    }\n                ><h3 style={{color:\"white\",}}>comments</h3></NavBar>\n                <ListView\n                    ref={el => this.lv = el}\n                    dataSource={this.state.dataSource}\n\n                    renderFooter={() => (<div style={{padding: 30, textAlign: 'center'}}>\n                        {this.state.isLoading ? 'Loading...' : 'Loaded'}\n                    </div>)}\n\n                    renderRow={row}\n                    renderSeparator={separator}\n\n                    style={{\n                        height: this.state.height,\n                        overflow: 'auto',\n                    }}\n                    className=\"am-list\"\n                    pageSize={4}\n                    onScroll={() => {\n                        console.log('scroll');\n                    }}\n                    scrollRenderAheadDistance={500}\n                    onEndReached={this.onEndReached}\n                    onEndReachedThreshold={10}\n                />\n            </div>\n\n        );\n    }\n}\n"]},"metadata":{},"sourceType":"module"}