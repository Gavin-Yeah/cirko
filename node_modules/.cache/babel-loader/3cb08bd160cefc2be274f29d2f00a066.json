{"ast":null,"code":"import \"antd-mobile/lib/wing-blank/style\";\nimport _WingBlank from \"antd-mobile/lib/wing-blank\";\nimport \"antd-mobile/lib/image-picker/style\";\nimport _ImagePicker from \"antd-mobile/lib/image-picker\";\nimport \"antd-mobile/lib/flex/style\";\nimport _Flex from \"antd-mobile/lib/flex\";\nimport \"antd-mobile/lib/button/style\";\nimport _Button from \"antd-mobile/lib/button\";\nimport \"antd-mobile/lib/switch/style\";\nimport _Switch from \"antd-mobile/lib/switch\";\nimport \"antd-mobile/lib/list/style\";\nimport _List from \"antd-mobile/lib/list\";\nimport \"antd-mobile/lib/textarea-item/style\";\nimport _TextareaItem from \"antd-mobile/lib/textarea-item\";\nimport \"antd-mobile/lib/nav-bar/style\";\nimport _NavBar from \"antd-mobile/lib/nav-bar\";\nvar _jsxFileName = \"/Users/jiadaye/workspace/cirko/src/components/CreatePost/index.js\";\nimport React, { Component } from 'react';\nimport { withAuthentication } from \"../Session\";\nimport add from \"../icons/add.png\";\nimport { get_user_profile, savePostToDB } from \"../Firebase/upload\";\nimport { get_location } from \"../utils/getLocation\";\n\nclass CreatePost extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      content: '',\n      files: [],\n      location: '',\n      isSwitched: false\n    };\n    this.contentRef = React.createRef();\n\n    this.add = () => {\n      let addPost = this.props.addPost;\n      let content = this.contentRef.current.value;\n      const postObj = {\n        id: 4,\n        userName: 'Jack',\n        time: '10:31 10/10/2019',\n        content: content,\n        pics: [],\n        likes: 0\n      };\n      addPost(postObj);\n      this.setState({\n        content: '',\n        pics: [],\n        multiple: true\n      });\n    };\n\n    this.onChange = event => {\n      this.setState({\n        content: event\n      });\n    };\n\n    this.onConfirm = () => {\n      get_location(location => {\n        const firebase = this.props.firebase;\n        const uid = firebase.auth.currentUser.uid;\n        const username = firebase.auth.currentUser.displayName;\n\n        const callback = ({\n          posts_num\n        }) => {\n          console.log(location);\n          let geocodeLatLng = firebase.functions.httpsCallable(\"geocodeLatLng\");\n          geocodeLatLng(location).then(result => {\n            // Read result of the Cloud Function.\n            console.log(result);\n            savePostToDB(firebase, uid, username, posts_num || 0, this.state.content, this.state.files, location, result.data, () => {\n              this.props.history.goBack();\n            });\n          }).catch(error => {\n            // Getting the Error details.\n            var code = error.code;\n            var message = error.message;\n            var details = error.details;\n            console.log(code);\n            console.log(message);\n            console.log(details); // ...\n          });\n        };\n\n        get_user_profile(firebase, uid, callback);\n      }); // geocodeLatLng(this.state.location).then(function (result) {\n      //     // Read result of the Cloud Function.\n      //     console.log(result);\n      //     savePostToDB(firebase, uid, username, posts_num || 0, this.state.content, this.state.location, result, this.state.files, () => {\n      //         this.props.history.goBack();\n      //     })\n      //\n      // }).catch(function (error) {\n      //     // Getting the Error details.\n      //     var code = error.code;\n      //     var message = error.message;\n      //     var details = error.details;\n      //     console.log(code);\n      //     console.log(message);\n      //     console.log(details);\n      //     // ...\n      // });\n    };\n\n    this.onChangePic = (files, type, index) => {\n      console.log(files, type, index);\n      this.setState({\n        files\n      });\n    };\n\n    this.onAddImageClick = e => {\n      e.preventDefault();\n      this.setState({\n        files: this.state.files.concat({\n          url: 'https://zos.alipayobjects.com/rmsportal/hqQWgTXdrlmVVYi.jpeg',\n          id: '3'\n        })\n      });\n    };\n\n    this.onTabChange = key => {\n      console.log(key);\n    };\n  }\n\n  render() {\n    const onAddCanceledHandler = this.props.onAddCanceledHandler;\n    let _this$state = this.state,\n        content = _this$state.content,\n        files = _this$state.files;\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }, React.createElement(_NavBar, {\n      style: {\n        backgroundColor: '#5396a5',\n        borderBottomLeftRadius: '100%',\n        borderBottomRightRadius: '100%',\n        height: \"7vh\",\n        position: 'fixed',\n        width: \"100%\",\n        top: 0,\n        zIndex: 1\n      },\n      mode: \"light\",\n      leftContent: React.createElement(\"div\", {\n        onClick: () => this.props.history.goBack(),\n        style: {\n          width: '40px',\n          marginTop: \"-20px\",\n          marginLeft: '5px',\n          color: 'White',\n          fontSize: '40px',\n          fontWeight: 'bold'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182\n        },\n        __self: this\n      }, \" <\"),\n      rightContent: React.createElement(\"div\", {\n        onClick: this.onConfirm,\n        style: {\n          width: '40px',\n          marginTop: \"-10px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: add,\n        style: {\n          width: \"40px\"\n        },\n        alt: \"add\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189\n        },\n        __self: this\n      })),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      style: {\n        color: \"white\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194\n      },\n      __self: this\n    }, \"Post\")), React.createElement(_List, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      style: {\n        height: '70px',\n        background: 'white'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200\n      },\n      __self: this\n    }), React.createElement(_TextareaItem, {\n      placeholder: \"What's happening?\",\n      autoHeight: true,\n      labelNumber: 5,\n      onChange: this.onChange,\n      rows: 5,\n      count: 300,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201\n      },\n      __self: this\n    })), React.createElement(_Flex, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211\n      },\n      __self: this\n    }, React.createElement(_List.Item, {\n      style: {\n        borderRadius: '5px',\n        background: \"transparent\",\n        border: \"solid #5396a5 1px\"\n      },\n      thumb: \"https://image.flaticon.com/icons/png/128/149/149060.png\",\n      extra: React.createElement(_Switch, {\n        checked: this.state.isSwitched,\n        onChange: () => {\n          this.setState({\n            isSwitched: !this.state.isSwitched\n          });\n        },\n        platform: \"android\",\n        color: \"#5396a5\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213\n      },\n      __self: this\n    }, \"Your Position\"), React.createElement(_Flex.Item, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224\n      },\n      __self: this\n    }, React.createElement(_Button, {\n      type: \"ghost\",\n      inline: true,\n      size: \"small\",\n      className: \"am-button-borderfix\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: \"https://image.flaticon.com/icons/png/128/149/149060.png\",\n      style: {\n        width: '15px'\n      },\n      alt: \"\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229\n      },\n      __self: this\n    }), \"Your Position\")), React.createElement(_Flex.Item, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232\n      },\n      __self: this\n    })), React.createElement(_WingBlank, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234\n      },\n      __self: this\n    }, React.createElement(_ImagePicker, {\n      files: files,\n      onChange: this.onChangePic,\n      onImageClick: (index, fs) => console.log(index, fs),\n      selectable: files.length < 7,\n      multiple: this.state.multiple,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236\n      },\n      __self: this\n    })));\n  }\n\n}\n\nexport default withAuthentication(CreatePost);","map":{"version":3,"sources":["/Users/jiadaye/workspace/cirko/src/components/CreatePost/index.js"],"names":["React","Component","withAuthentication","add","get_user_profile","savePostToDB","get_location","CreatePost","state","content","files","location","isSwitched","contentRef","createRef","addPost","props","current","value","postObj","id","userName","time","pics","likes","setState","multiple","onChange","event","onConfirm","firebase","uid","auth","currentUser","username","displayName","callback","posts_num","console","log","geocodeLatLng","functions","httpsCallable","then","result","data","history","goBack","catch","error","code","message","details","onChangePic","type","index","onAddImageClick","e","preventDefault","concat","url","onTabChange","key","render","onAddCanceledHandler","backgroundColor","borderBottomLeftRadius","borderBottomRightRadius","height","position","width","top","zIndex","marginTop","marginLeft","color","fontSize","fontWeight","background","borderRadius","border","fs","length"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { withAuthentication } from \"../Session\";\nimport { NavBar, Button, Icon, List, TextareaItem, Flex, ImagePicker, WingBlank, Switch } from 'antd-mobile'\nimport add from \"../icons/add.png\";\nimport { get_user_profile, savePostToDB } from \"../Firebase/upload\";\nimport { get_location } from \"../utils/getLocation\";\n\n\nclass CreatePost extends Component {\n    state = {\n        content: '',\n        files: [],\n        location: '',\n        isSwitched:false\n\n\n    }\n    contentRef = React.createRef();\n    add = () => {\n        let { addPost } = this.props\n        let content = this.contentRef.current.value;\n        const postObj = { id: 4, userName: 'Jack', time: '10:31 10/10/2019', content: content, pics: [], likes: 0 }\n        addPost(postObj)\n        this.setState({\n            content: '',\n            pics: [],\n            multiple: true\n        })\n\n    }\n\n\n    onChange = event => {\n        this.setState({ content: event });\n    };\n\n    onConfirm = () => {\n        get_location((location)=> {\n\n            const firebase = this.props.firebase;\n            const uid = firebase.auth.currentUser.uid;\n            const username = firebase.auth.currentUser.displayName;\n            const callback = ({posts_num}) => {\n                console.log(location);\n                let geocodeLatLng = firebase.functions.httpsCallable(\"geocodeLatLng\");\n\n                geocodeLatLng(location).then( (result)=> {\n                    // Read result of the Cloud Function.\n                    console.log(result);\n                    savePostToDB(firebase,uid,username,posts_num||0,this.state.content,this.state.files,location,result.data,() => {\n\n                        this.props.history.goBack();\n                    })\n\n                }).catch( (error) => {\n                    // Getting the Error details.\n                    var code = error.code;\n                    var message = error.message;\n                    var details = error.details;\n                    console.log(code);\n                    console.log(message);\n                    console.log(details);\n                    // ...\n                });\n\n\n            }\n\n\n\n                get_user_profile(firebase, uid, callback);\n\n        })\n\n\n            // geocodeLatLng(this.state.location).then(function (result) {\n            //     // Read result of the Cloud Function.\n            //     console.log(result);\n            //     savePostToDB(firebase, uid, username, posts_num || 0, this.state.content, this.state.location, result, this.state.files, () => {\n            //         this.props.history.goBack();\n            //     })\n            //\n            // }).catch(function (error) {\n            //     // Getting the Error details.\n            //     var code = error.code;\n            //     var message = error.message;\n            //     var details = error.details;\n            //     console.log(code);\n            //     console.log(message);\n            //     console.log(details);\n            //     // ...\n            // });\n\n\n        }\n\n        ////////////////////////////////////////////////////////////////////////////////////////////////////////\n//         /* TEST fliter and geocodeLatLng */\n//         let fliter = firebase.functions.httpsCallable(\"fliter\");\n//         let geocodeLatLng = firebase.functions.httpsCallable(\"geocodeLatLng\");\n//         let user_location = {\n//             lat: 33.6429056,\n//             lng: -117.84273920000001\n//         };\n//         let list_posts = [{\n//             location: {\n//                 lat: 33.6429056,\n//                 lng: -117.84273920000001\n//             }\n//         },\n//         {\n//             location: {\n//                 lat: 33.66912,\n//                 lng: -117.81898239999998\n//             }\n//         }];\n//         geocodeLatLng(user_location).then(function (result) {\n//             // Read result of the Cloud Function.\n//             console.log(result);\n//\n//         }).catch(function (error) {\n//             // Getting the Error details.\n//             var code = error.code;\n//             var message = error.message;\n//             var details = error.details;\n//             console.log(code);\n//             console.log(message);\n//             console.log(details);\n//             // ...\n//         });;\n//         let dis = 100;\n//\n//         res = [list_posts, dis, user_location];\n//         console.log(res);\n//         fliter(res).then(function (result) {\n//             // Read result of the Cloud Function.\n//             console.log(result);\n//         }).catch(function (error) {\n//             // Getting the Error details.\n//             var code = error.code;\n//             var message = error.message;\n//             var details = error.details;\n//             console.log(code);\n//             console.log(message);\n//             console.log(details);\n//             // ...\n//         });\n// >>>>>>> ee6f58f9fc9ad5d6fc107ad8fa25ad6e87d2a3c4\n\n\n\n    onChangePic = (files, type, index) => {\n        console.log(files, type, index);\n        this.setState({\n            files,\n        });\n    }\n    onAddImageClick = (e) => {\n        e.preventDefault();\n        this.setState({\n            files: this.state.files.concat({\n                url: 'https://zos.alipayobjects.com/rmsportal/hqQWgTXdrlmVVYi.jpeg',\n                id: '3',\n            }),\n        });\n    };\n    onTabChange = (key) => {\n        console.log(key);\n    };\n    render() {\n\n        const { onAddCanceledHandler } = this.props\n        let { content, files } = this.state\n        return (\n            <div>\n                <NavBar\n\n                    style={{backgroundColor: '#5396a5', borderBottomLeftRadius:'100%', borderBottomRightRadius:'100%',  height:\"7vh\",position:'fixed',width:\"100%\", top:0,zIndex:1}}\n\n                    mode=\"light\"\n                    leftContent={\n                        <div onClick={() => this.props.history.goBack()} style={{ width: '40px', marginTop: \"-20px\", marginLeft: '5px', color: 'White', fontSize: '40px', fontWeight: 'bold' }}> &lt;\n                        </div>\n                    }\n\n\n                    rightContent={\n\n                        <div onClick={this.onConfirm}  style={{width: '40px',marginTop:\"-10px\",}}><img src={add} style={{width:\"40px\"}} alt=\"add\"/>\n\n                        </div>\n\n                    }\n                ><h1 style={{ color: \"white\", }}>Post</h1>\n\n                </NavBar>\n\n\n                <List>\n                    <div style={{ height: '70px', background: 'white' }}></div>\n                    <TextareaItem\n\n                        placeholder={\"What's happening?\"}\n                        autoHeight\n                        labelNumber={5}\n                        onChange={this.onChange}\n                        rows={5}\n                        count={300}\n                    />\n                </List>\n                <Flex>\n\n                    <List.Item\n                        style={{borderRadius:'5px', background:\"transparent\", border:\"solid #5396a5 1px\"}}\n                        thumb={\"https://image.flaticon.com/icons/png/128/149/149060.png\"}\n                        extra={<Switch\n                            checked={this.state.isSwitched}\n                            onChange={()=>{this.setState({isSwitched:!this.state.isSwitched})}}\n                            platform=\"android\"\n                            color={\"#5396a5\"}\n\n                        />}\n                    >Your Position</List.Item>\n                    <Flex.Item>\n\n\n\n                        <Button type=\"ghost\" inline size=\"small\" className=\"am-button-borderfix\">\n                            <img src=\"https://image.flaticon.com/icons/png/128/149/149060.png\" style={{ width: '15px' }} alt=\"\" />\n                            Your Position</Button>\n                    </Flex.Item>\n                    <Flex.Item></Flex.Item>\n                </Flex>\n                <WingBlank>\n\n                    <ImagePicker\n                        files={files}\n                        onChange={this.onChangePic}\n                        onImageClick={(index, fs) => console.log(index, fs)}\n                        selectable={files.length < 7}\n                        multiple={this.state.multiple}\n                    />\n                </WingBlank>\n\n            </div>\n\n        );\n    }\n}\nexport default withAuthentication(CreatePost);"]},"metadata":{},"sourceType":"module"}