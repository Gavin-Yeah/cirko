{"ast":null,"code":"function get_all_post(user_id, callback) {\n  get_all_post_id_from_db(user_id, callback);\n}\n\nfunction get_all_post_id_from_db(firebase, user_id, callback) {\n  //get db reference\n  var db = firebase.db;\n  var docRef = db.collection(\"users\").doc(user_id); //get user\n\n  docRef.get().then(function (doc) {\n    if (doc.exists) {\n      console.log(\"Document data:\");\n      get_posts_from_post_ID_list(doc.data().posts, callback);\n    } else {\n      // doc.data() will be undefined in this case\n      console.log(\"No such document!\");\n    }\n  });\n}\n\nfunction get_posts_from_post_ID_list(pID_list, callback) {\n  for (var i = 0; i < pID_list.length; i++) {\n    get_post(pID_list[i], callback);\n  }\n}\n\nfunction get_post(firebase, post_id, callback) {\n  //get db reference\n  var db = firebase.db;\n  var docRef = db.collection(\"posts\").doc(post_id);\n  docRef.get().then(function (doc) {\n    if (doc.exists) {\n      console.log(\"Document data:\");\n      callback(doc.data());\n    } else {\n      // doc.data() will be undefined in this case\n      console.log(\"No such document!\");\n    }\n  });\n}\n\nexport { get_all_post };","map":{"version":3,"sources":["/Users/jiadaye/workspace/cirko/src/components/Firebase/getPosts.js"],"names":["get_all_post","user_id","callback","get_all_post_id_from_db","firebase","db","docRef","collection","doc","get","then","exists","console","log","get_posts_from_post_ID_list","data","posts","pID_list","i","length","get_post","post_id"],"mappings":"AAAA,SAASA,YAAT,CAAsBC,OAAtB,EAA+BC,QAA/B,EAAwC;AACpCC,EAAAA,uBAAuB,CAACF,OAAD,EAAUC,QAAV,CAAvB;AACH;;AAGD,SAASC,uBAAT,CAAiCC,QAAjC,EAA0CH,OAA1C,EAAmDC,QAAnD,EAA4D;AACxD;AACA,MAAIG,EAAE,GAAGD,QAAQ,CAACC,EAAlB;AACA,MAAIC,MAAM,GAAGD,EAAE,CAACE,UAAH,CAAc,OAAd,EAAuBC,GAAvB,CAA2BP,OAA3B,CAAb,CAHwD,CAIxD;;AACAK,EAAAA,MAAM,CAACG,GAAP,GAAaC,IAAb,CAAkB,UAASF,GAAT,EAAc;AAC5B,QAAIA,GAAG,CAACG,MAAR,EAAgB;AACZC,MAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ;AACAC,MAAAA,2BAA2B,CAACN,GAAG,CAACO,IAAJ,GAAWC,KAAZ,EAAmBd,QAAnB,CAA3B;AACH,KAHD,MAGO;AACH;AACAU,MAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ;AACH;AACJ,GARD;AASH;;AAED,SAASC,2BAAT,CAAqCG,QAArC,EAA+Cf,QAA/C,EAAwD;AACpD,OAAK,IAAIgB,CAAC,GAAC,CAAX,EAAaA,CAAC,GAACD,QAAQ,CAACE,MAAxB,EAA+BD,CAAC,EAAhC,EACA;AACIE,IAAAA,QAAQ,CAACH,QAAQ,CAACC,CAAD,CAAT,EAAchB,QAAd,CAAR;AACH;AACJ;;AAED,SAASkB,QAAT,CAAkBhB,QAAlB,EAA2BiB,OAA3B,EAAmCnB,QAAnC,EAA6C;AACzC;AACA,MAAIG,EAAE,GAAGD,QAAQ,CAACC,EAAlB;AACA,MAAIC,MAAM,GAAGD,EAAE,CAACE,UAAH,CAAc,OAAd,EAAuBC,GAAvB,CAA2Ba,OAA3B,CAAb;AAEAf,EAAAA,MAAM,CAACG,GAAP,GAAaC,IAAb,CAAkB,UAASF,GAAT,EAAc;AAC5B,QAAIA,GAAG,CAACG,MAAR,EAAgB;AACZC,MAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ;AACAX,MAAAA,QAAQ,CAACM,GAAG,CAACO,IAAJ,EAAD,CAAR;AACH,KAHD,MAGO;AACH;AACAH,MAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ;AACH;AACJ,GARD;AASH;;AACD,SAAQb,YAAR","sourcesContent":["function get_all_post(user_id, callback){\n    get_all_post_id_from_db(user_id, callback);\n}\n\n\nfunction get_all_post_id_from_db(firebase,user_id, callback){\n    //get db reference\n    var db = firebase.db;\n    var docRef = db.collection(\"users\").doc(user_id);\n    //get user\n    docRef.get().then(function(doc) {\n        if (doc.exists) {\n            console.log(\"Document data:\");\n            get_posts_from_post_ID_list(doc.data().posts, callback);\n        } else {\n            // doc.data() will be undefined in this case\n            console.log(\"No such document!\");\n        }\n    });\n}\n\nfunction get_posts_from_post_ID_list(pID_list, callback){\n    for (var i=0;i<pID_list.length;i++)\n    {\n        get_post(pID_list[i], callback);\n    }\n}\n\nfunction get_post(firebase,post_id,callback) {\n    //get db reference\n    var db = firebase.db;\n    var docRef = db.collection(\"posts\").doc(post_id);\n\n    docRef.get().then(function(doc) {\n        if (doc.exists) {\n            console.log(\"Document data:\");\n            callback(doc.data());\n        } else {\n            // doc.data() will be undefined in this case\n            console.log(\"No such document!\");\n        }\n    });\n}\nexport {get_all_post}"]},"metadata":{},"sourceType":"module"}