{"ast":null,"code":"import \"antd-mobile/lib/wing-blank/style\";\nimport _WingBlank from \"antd-mobile/lib/wing-blank\";\nimport \"antd-mobile/lib/image-picker/style\";\nimport _ImagePicker from \"antd-mobile/lib/image-picker\";\nimport \"antd-mobile/lib/flex/style\";\nimport _Flex from \"antd-mobile/lib/flex\";\nimport \"antd-mobile/lib/button/style\";\nimport _Button from \"antd-mobile/lib/button\";\nimport \"antd-mobile/lib/list/style\";\nimport _List from \"antd-mobile/lib/list\";\nimport \"antd-mobile/lib/textarea-item/style\";\nimport _TextareaItem from \"antd-mobile/lib/textarea-item\";\nimport \"antd-mobile/lib/nav-bar/style\";\nimport _NavBar from \"antd-mobile/lib/nav-bar\";\nvar _jsxFileName = \"/Users/jiadaye/workspace/cirko/src/components/CreatePost/index.js\";\nimport React, { Component } from 'react';\nimport { withAuthentication } from \"../Session\";\nimport add from \"../icons/add.png\";\nimport { get_user_profile, savePostToDB } from \"../Firebase/upload\";\nconst data = [{\n  url: 'https://zos.alipayobjects.com/rmsportal/PZUUCKTRIHWiZSY.jpeg',\n  id: '2121'\n}, {\n  url: 'https://zos.alipayobjects.com/rmsportal/hqQWgTXdrlmVVYi.jpeg',\n  id: '2122'\n}];\n\nclass CreatePost extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      content: '',\n      files: data,\n      location: ''\n    };\n    this.contentRef = React.createRef();\n\n    this.add = () => {\n      let addPost = this.props.addPost;\n      let content = this.contentRef.current.value;\n      const postObj = {\n        id: 4,\n        userName: 'Jack',\n        time: '10:31 10/10/2019',\n        content: content,\n        pics: [],\n        likes: 0\n      };\n      addPost(postObj);\n      this.setState({\n        content: '',\n        pics: [],\n        multiple: true\n      });\n    };\n\n    this.onChange = event => {\n      this.setState({\n        content: event\n      });\n    };\n\n    this.onConfirm = () => {\n      const firebase = this.props.firebase;\n      const uid = firebase.auth.currentUser.uid; // const callback = ({posts_num})=>{\n      //     savePostToDB(firebase,uid,posts_num,this.state.content,this.state.location,this.state.files,()=>{\n      //         this.props.history.goBack();\n      //     })\n      // }\n      //  get_user_profile(firebase,uid,callback)\n\n      console.log(firebase.fieldValue()); //this.props.history.goBack()\n    };\n\n    this.onChangePic = (files, type, index) => {\n      console.log(files, type, index);\n      this.setState({\n        files\n      });\n    };\n\n    this.onAddImageClick = e => {\n      e.preventDefault();\n      this.setState({\n        files: this.state.files.concat({\n          url: 'https://zos.alipayobjects.com/rmsportal/hqQWgTXdrlmVVYi.jpeg',\n          id: '3'\n        })\n      });\n    };\n\n    this.onTabChange = key => {\n      console.log(key);\n    };\n  }\n\n  render() {\n    const onAddCanceledHandler = this.props.onAddCanceledHandler;\n    let _this$state = this.state,\n        content = _this$state.content,\n        files = _this$state.files;\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }, React.createElement(_NavBar, {\n      style: {\n        backgroundColor: '#5396a5',\n        borderBottomLeftRadius: '100%',\n        borderBottomRightRadius: '100%',\n        height: \"70px\",\n        position: 'fixed',\n        width: \"100%\",\n        top: 0,\n        zIndex: 1\n      },\n      mode: \"light\",\n      leftContent: React.createElement(\"div\", {\n        onClick: () => this.props.history.goBack(),\n        style: {\n          width: '40px',\n          marginTop: \"-20px\",\n          marginLeft: '5px',\n          color: 'White',\n          fontSize: '40px',\n          fontWeight: 'bold'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }, \" <\"),\n      rightContent: React.createElement(\"div\", {\n        onClick: this.onConfirm,\n        style: {\n          width: '40px',\n          marginTop: \"-20px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: add,\n        style: {\n          width: \"50px\"\n        },\n        alt: \"add\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      })),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      style: {\n        color: \"white\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, \"Post\")), React.createElement(_List, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }, React.createElement(_TextareaItem, {\n      placeholder: \"What's happening?\",\n      autoHeight: true,\n      labelNumber: 5,\n      onChange: this.onChange,\n      rows: 5,\n      count: 300,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    })), React.createElement(_Flex, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }, React.createElement(_Flex.Item, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }, React.createElement(_Button, {\n      type: \"ghost\",\n      inline: true,\n      size: \"small\",\n      className: \"am-button-borderfix\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: \"https://image.flaticon.com/icons/png/128/149/149060.png\",\n      style: {\n        width: '15px'\n      },\n      alt: \"\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }), \"Your Position\")), React.createElement(_Flex.Item, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    })), React.createElement(_WingBlank, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }, React.createElement(_ImagePicker, {\n      files: files,\n      onChange: this.onChangePic,\n      onImageClick: (index, fs) => console.log(index, fs),\n      selectable: files.length < 7,\n      multiple: this.state.multiple,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    })));\n  }\n\n}\n\nexport default withAuthentication(CreatePost);","map":{"version":3,"sources":["/Users/jiadaye/workspace/cirko/src/components/CreatePost/index.js"],"names":["React","Component","withAuthentication","add","get_user_profile","savePostToDB","data","url","id","CreatePost","state","content","files","location","contentRef","createRef","addPost","props","current","value","postObj","userName","time","pics","likes","setState","multiple","onChange","event","onConfirm","firebase","uid","auth","currentUser","console","log","fieldValue","onChangePic","type","index","onAddImageClick","e","preventDefault","concat","onTabChange","key","render","onAddCanceledHandler","backgroundColor","borderBottomLeftRadius","borderBottomRightRadius","height","position","width","top","zIndex","history","goBack","marginTop","marginLeft","color","fontSize","fontWeight","fs","length"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport {withAuthentication} from \"../Session\";\nimport {NavBar, Button, Icon, List, TextareaItem, Flex,ImagePicker, WingBlank} from 'antd-mobile'\nimport add from \"../icons/add.png\";\nimport { get_user_profile, savePostToDB } from \"../Firebase/upload\";\n\nconst data = [{\n    url: 'https://zos.alipayobjects.com/rmsportal/PZUUCKTRIHWiZSY.jpeg',\n    id: '2121',\n}, {\n    url: 'https://zos.alipayobjects.com/rmsportal/hqQWgTXdrlmVVYi.jpeg',\n    id: '2122',\n}];\nclass CreatePost extends Component {\n    state = {\n        content:'',\n        files:data,\n       location:'',\n\n\n    }\n    contentRef =  React.createRef();\n    add = ()=>{\n        let {addPost} = this.props\n        let content = this.contentRef.current.value;\n        const postObj = {id:4,userName:'Jack',time:'10:31 10/10/2019',content: content, pics:[], likes:0}\n        addPost(postObj)\n        this.setState({\n            content:'',\n            pics:[],\n            multiple:true\n        })\n\n    }\n    onChange = event => {\n        this.setState({ content: event });\n    };\n    onConfirm = ()=>{\n\n        const firebase = this.props.firebase;\n        const uid = firebase.auth.currentUser.uid;\n        // const callback = ({posts_num})=>{\n        //     savePostToDB(firebase,uid,posts_num,this.state.content,this.state.location,this.state.files,()=>{\n        //         this.props.history.goBack();\n        //     })\n        // }\n        //  get_user_profile(firebase,uid,callback)\n        console.log(firebase.fieldValue())\n\n\n        //this.props.history.goBack()\n    }\n\n    onChangePic = (files, type, index) => {\n        console.log(files, type, index);\n        this.setState({\n            files,\n        });\n    }\n    onAddImageClick = (e) => {\n        e.preventDefault();\n        this.setState({\n            files: this.state.files.concat({\n                url: 'https://zos.alipayobjects.com/rmsportal/hqQWgTXdrlmVVYi.jpeg',\n                id: '3',\n            }),\n        });\n    };\n    onTabChange = (key) => {\n        console.log(key);\n    };\n    render() {\n\n        const {onAddCanceledHandler} = this.props\n        let {content,files} = this.state\n        return (\n            <div>\n                <NavBar\n                    style={{backgroundColor: '#5396a5', borderBottomLeftRadius:'100%', borderBottomRightRadius:'100%',  height:\"70px\",position:'fixed',width:\"100%\", top:0,zIndex:1}}\n                    mode=\"light\"\n                    leftContent={\n                        <div onClick={()=>  this.props.history.goBack()}  style={{width: '40px',marginTop:\"-20px\", marginLeft:'5px', color:'White', fontSize:'40px',fontWeight: 'bold'}}> &lt;\n                        </div>\n                    }\n\n\n                    rightContent={\n                        <div onClick={this.onConfirm}  style={{width: '40px',marginTop:\"-20px\",}}><img src={add} style={{width:\"50px\"}} alt=\"add\"/>\n                        </div>\n\n                    }\n                ><h1 style={{color:\"white\",}}>Post</h1>\n                </NavBar>\n\n                <List>\n                    <TextareaItem\n\n                        placeholder={\"What's happening?\"}\n                        autoHeight\n                        labelNumber={5}\n                        onChange={this.onChange}\n                        rows={5}\n                        count={300}\n                    />\n                </List>\n                <Flex>\n                    <Flex.Item>\n                        <Button  type=\"ghost\" inline size=\"small\" className=\"am-button-borderfix\">\n                            <img src=\"https://image.flaticon.com/icons/png/128/149/149060.png\" style={{width:'15px'}}  alt=\"\"/>\n                            Your Position</Button>\n                    </Flex.Item>\n                    <Flex.Item></Flex.Item>\n                </Flex>\n                <WingBlank>\n\n                    <ImagePicker\n                        files={files}\n                        onChange={this.onChangePic}\n                        onImageClick={(index, fs) => console.log(index, fs)}\n                        selectable={files.length < 7}\n                        multiple={this.state.multiple}\n                    />\n                </WingBlank>\n\n                </div>\n\n        );\n    }\n}\nexport default withAuthentication(CreatePost);"]},"metadata":{},"sourceType":"module"}