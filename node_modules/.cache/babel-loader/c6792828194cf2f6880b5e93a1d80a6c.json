{"ast":null,"code":"import \"antd-mobile/lib/button/style\";\nimport _Button from \"antd-mobile/lib/button\";\nimport \"antd-mobile/lib/image-picker/style\";\nimport _ImagePicker from \"antd-mobile/lib/image-picker\";\nimport \"antd-mobile/lib/nav-bar/style\";\nimport _NavBar from \"antd-mobile/lib/nav-bar\";\nimport \"antd-mobile/lib/icon/style\";\nimport _Icon from \"antd-mobile/lib/icon\";\nvar _jsxFileName = \"/Users/jiadaye/workspace/cirko/src/components/EditAvatar/index.js\";\nimport React, { Component } from 'react';\nimport * as ROUTES from \"../../constants/routes\";\nimport { withFirebase } from '../Firebase';\nimport { save_image } from '../Firebase/upload';\nimport { compose } from \"recompose\";\nimport { withAuthentication } from \"../Session\";\nconst data = [{\n  url: 'https://zos.alipayobjects.com/rmsportal/PZUUCKTRIHWiZSY.jpeg'\n}];\n\nclass EditAvatar extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      files: data,\n      multiple: false\n    };\n\n    this.onChange = (files, type, index) => {\n      console.log(files, type, index);\n      this.setState({\n        files\n      });\n    };\n\n    this.onClick = () => {\n      let files = this.state.files; // this.props.firebase.auth.currentUser.updateProfile({\n      //     photoURL:files[0]\n      // })\n\n      save_image(this.props.firebase, this.props.firebase.auth.currentUser.uid, files[0].file);\n    };\n  }\n\n  render() {\n    const imageUrl = this.props.firebase.auth.currentUser.photoURL;\n    this.setState({\n      data: [{\n        url: imageUrl\n      }]\n    });\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 44\n      },\n      __self: this\n    }, React.createElement(_NavBar, {\n      mode: \"light\",\n      icon: React.createElement(_Icon, {\n        type: \"left\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 47\n        },\n        __self: this\n      }),\n      onLeftClick: () => {\n        this.props.history.goBack();\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 45\n      },\n      __self: this\n    }, \"Update Avatar\"), React.createElement(_ImagePicker, {\n      files: files,\n      onChange: this.onChange,\n      onImageClick: (index, fs) => console.log(index, fs),\n      selectable: files.length < 1,\n      multiple: this.state.multiple,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51\n      },\n      __self: this\n    }), React.createElement(_Button, {\n      type: \"primary\",\n      onClick: this.onClick,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58\n      },\n      __self: this\n    }, \"Confirm\"));\n  }\n\n}\n\nexport default withAuthentication(EditAvatar);","map":{"version":3,"sources":["/Users/jiadaye/workspace/cirko/src/components/EditAvatar/index.js"],"names":["React","Component","ROUTES","withFirebase","save_image","compose","withAuthentication","data","url","EditAvatar","state","files","multiple","onChange","type","index","console","log","setState","onClick","props","firebase","auth","currentUser","uid","file","render","imageUrl","photoURL","history","goBack","fs","length"],"mappings":";;;;;;;;;AAAA,OAAOA,KAAP,IAAeC,SAAf,QAA+B,OAA/B;AAEA,OAAO,KAAKC,MAAZ,MAAwB,wBAAxB;AACA,SAASC,YAAT,QAA6B,aAA7B;AACA,SAAQC,UAAR,QAAyB,oBAAzB;AACA,SAASC,OAAT,QAAwB,WAAxB;AACA,SAASC,kBAAT,QAAmC,YAAnC;AAGA,MAAMC,IAAI,GAAG,CAAC;AACVC,EAAAA,GAAG,EAAE;AADK,CAAD,CAAb;;AAIA,MAAMC,UAAN,SAAyBR,SAAzB,CAAmC;AAAA;AAAA;AAAA,SAC/BS,KAD+B,GACvB;AACJC,MAAAA,KAAK,EAAEJ,IADH;AAEJK,MAAAA,QAAQ,EAAE;AAFN,KADuB;;AAAA,SAK/BC,QAL+B,GAKpB,CAACF,KAAD,EAAQG,IAAR,EAAcC,KAAd,KAAwB;AAC/BC,MAAAA,OAAO,CAACC,GAAR,CAAYN,KAAZ,EAAmBG,IAAnB,EAAyBC,KAAzB;AACA,WAAKG,QAAL,CAAc;AACVP,QAAAA;AADU,OAAd;AAGH,KAV8B;;AAAA,SAW/BQ,OAX+B,GAWvB,MAAI;AAAA,UACHR,KADG,GACM,KAAKD,KADX,CACHC,KADG,EAER;AACA;AACA;;AACAP,MAAAA,UAAU,CAAC,KAAKgB,KAAL,CAAWC,QAAZ,EAAqB,KAAKD,KAAL,CAAWC,QAAX,CAAoBC,IAApB,CAAyBC,WAAzB,CAAqCC,GAA1D,EAA8Db,KAAK,CAAC,CAAD,CAAL,CAASc,IAAvE,CAAV;AAGH,KAnB8B;AAAA;;AAqB/BC,EAAAA,MAAM,GAAG;AAEL,UAAMC,QAAQ,GAAG,KAAKP,KAAL,CAAWC,QAAX,CAAoBC,IAApB,CAAyBC,WAAzB,CAAqCK,QAAtD;AACA,SAAKV,QAAL,CAAc;AACVX,MAAAA,IAAI,EAAC,CACD;AAACC,QAAAA,GAAG,EAACmB;AAAL,OADC;AADK,KAAd;AAKA,WACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AACI,MAAA,IAAI,EAAC,OADT;AAEI,MAAA,IAAI,EAAE;AAAM,QAAA,IAAI,EAAC,MAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFV;AAGI,MAAA,WAAW,EAAE,MAAM;AAAC,aAAKP,KAAL,CAAWS,OAAX,CAAmBC,MAAnB;AAA4B,OAHpD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBADJ,EAOI;AACI,MAAA,KAAK,EAAEnB,KADX;AAEI,MAAA,QAAQ,EAAE,KAAKE,QAFnB;AAGI,MAAA,YAAY,EAAE,CAACE,KAAD,EAAQgB,EAAR,KAAef,OAAO,CAACC,GAAR,CAAYF,KAAZ,EAAmBgB,EAAnB,CAHjC;AAII,MAAA,UAAU,EAAEpB,KAAK,CAACqB,MAAN,GAAe,CAJ/B;AAKI,MAAA,QAAQ,EAAE,KAAKtB,KAAL,CAAWE,QALzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAPJ,EAcI;AAAQ,MAAA,IAAI,EAAE,SAAd;AAAyB,MAAA,OAAO,EAAE,KAAKO,OAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAdJ,CADJ;AAkBH;;AA/C8B;;AAkDnC,eAAeb,kBAAkB,CAACG,UAAD,CAAjC","sourcesContent":["import React, {Component} from 'react';\nimport {Icon, ImagePicker, NavBar, WingBlank,Button} from 'antd-mobile';\nimport * as ROUTES from \"../../constants/routes\";\nimport { withFirebase } from '../Firebase';\nimport {save_image} from '../Firebase/upload'\nimport { compose } from \"recompose\";\nimport { withAuthentication } from \"../Session\";\n\n\nconst data = [{\n    url: 'https://zos.alipayobjects.com/rmsportal/PZUUCKTRIHWiZSY.jpeg',\n   \n}, ];\nclass EditAvatar extends Component {\n    state = {\n        files: data,\n        multiple: false,\n    }\n    onChange = (files, type, index) => {\n        console.log(files, type, index);\n        this.setState({\n            files,\n        });\n    }\n    onClick=()=>{\n        let {files} = this.state;\n        // this.props.firebase.auth.currentUser.updateProfile({\n        //     photoURL:files[0]\n        // })\n        save_image(this.props.firebase,this.props.firebase.auth.currentUser.uid,files[0].file);\n\n\n    }\n\n    render() {\n\n        const imageUrl = this.props.firebase.auth.currentUser.photoURL\n        this.setState({\n            data:[\n                {url:imageUrl}\n            ]\n        })\n        return (\n            <div >\n                <NavBar\n                    mode=\"light\"\n                    icon={<Icon type=\"left\" />}\n                    onLeftClick={() => {this.props.history.goBack()}}\n\n                >Update Avatar</NavBar>\n                <ImagePicker\n                    files={files}\n                    onChange={this.onChange}\n                    onImageClick={(index, fs) => console.log(index, fs)}\n                    selectable={files.length < 1}\n                    multiple={this.state.multiple}\n                />\n                <Button type={\"primary\"} onClick={this.onClick}>Confirm</Button>\n            </div>\n        );\n    }\n}\n\nexport default withAuthentication(EditAvatar);"]},"metadata":{},"sourceType":"module"}