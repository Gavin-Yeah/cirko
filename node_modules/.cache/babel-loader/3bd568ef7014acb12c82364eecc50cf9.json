{"ast":null,"code":"import\"antd-mobile/lib/button/style\";import _Button from\"antd-mobile/lib/button\";import\"antd-mobile/lib/list/style\";import _List from\"antd-mobile/lib/list\";import\"antd-mobile/lib/white-space/style\";import _WhiteSpace from\"antd-mobile/lib/white-space\";import\"antd-mobile/lib/input-item/style\";import _InputItem from\"antd-mobile/lib/input-item\";import _defineProperty from\"/Users/jiadaye/workspace/cirko/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/jiadaye/workspace/cirko/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/jiadaye/workspace/cirko/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/jiadaye/workspace/cirko/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/jiadaye/workspace/cirko/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/jiadaye/workspace/cirko/node_modules/@babel/runtime/helpers/esm/inherits\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}import React,{Component}from'react';import{withRouter}from'react-router-dom';import{compose}from'recompose';import{withFirebase}from'../Firebase';import*as ROUTES from'../../constants/routes';import{SignUpLink}from'../SignUp';import{PasswordForgetLink}from'../PasswordForget';import\"./index.css\";import*as firebaseui from'firebaseui';var SignInPage=function SignInPage(){return React.createElement(\"div\",null,React.createElement(\"div\",{className:\"icon1\"},React.createElement(\"img\",{className:\"image\",src:require(\"../icons/cirko-trans.png\"),alt:\"\"})),React.createElement(\"div\",{className:\"icon2\"},React.createElement(\"h2\",{className:\"appName\"},\"CIRKO\")),React.createElement(SignInForm,null),React.createElement(\"br\",null),React.createElement(SignInGoogle,null),React.createElement(\"br\",null),React.createElement(SignUpLink,null));};var INITIAL_STATE={email:'',password:'',error:null};var SignInFormBase=/*#__PURE__*/function(_Component){_inherits(SignInFormBase,_Component);function SignInFormBase(props){var _this;_classCallCheck(this,SignInFormBase);_this=_possibleConstructorReturn(this,_getPrototypeOf(SignInFormBase).call(this,props));_this.onSubmit=function(event){var _this$state=_this.state,email=_this$state.email,password=_this$state.password;_this.props.firebase.doSignInWithEmailAndPassword(email,password).then(function(){_this.setState(_objectSpread({},INITIAL_STATE));_this.props.history.push(ROUTES.HOME);}).catch(function(error){_this.setState({error:error});});event.preventDefault();};_this.onPasswordChange=function(event){_this.setState({password:event});};_this.onEmailChange=function(event){_this.setState({email:event});};_this.state=_objectSpread({},INITIAL_STATE);return _this;}_createClass(SignInFormBase,[{key:\"render\",value:function render(){var _this$state2=this.state,email=_this$state2.email,password=_this$state2.password,error=_this$state2.error;var isInvalid=password===''||email==='';return React.createElement(\"div\",null,React.createElement(_List,null,React.createElement(_InputItem,{name:\"email\",value:email,onChange:this.onEmailChange,type:\"text\",placeholder:\"Email Address\"}),React.createElement(_WhiteSpace,null),React.createElement(_InputItem,{name:\"password\",value:password,onChange:this.onPasswordChange,type:\"password\",placeholder:\"Password\"})),React.createElement(_WhiteSpace,null),React.createElement(_WhiteSpace,null),React.createElement(_List,null,React.createElement(_Button,{type:\"warning\",onClick:this.onSubmit},\"Sign In\"),error&&React.createElement(\"p\",null,error.message)));}}]);return SignInFormBase;}(Component);var SignInGoogleBase=/*#__PURE__*/function(_Component2){_inherits(SignInGoogleBase,_Component2);function SignInGoogleBase(props){var _this2;_classCallCheck(this,SignInGoogleBase);_this2=_possibleConstructorReturn(this,_getPrototypeOf(SignInGoogleBase).call(this,props));_this2.onSubmit=function(event){_this2.props.firebase.doSignInWithGoogle().then(function(socialAuthUser){// Create a user in your Firebase Realtime Database too\nreturn _this2.props.firebase.user(socialAuthUser.user.uid).set({username:socialAuthUser.user.displayName,email:socialAuthUser.user.email,roles:{},avatarUrl:socialAuthUser.user.photoURL,userId:socialAuthUser.user.uid},{merge:true});}).then(function(socialAuthUser){_this2.setState({error:null});_this2.props.history.push(ROUTES.POSTPAGE);}).catch(function(error){_this2.setState({error:error});});event.preventDefault();};_this2.state={error:null};return _this2;}_createClass(SignInGoogleBase,[{key:\"render\",value:function render(){var error=this.state.error;return React.createElement(\"div\",null,React.createElement(_Button,{type:'submit',onClick:this.onSubmit},React.createElement(\"div\",{style:{textAlign:\"top\",alignItems:'center'}},React.createElement(\"img\",{className:\"googleIcon\",src:\"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg\",alt:\"\"}),React.createElement(\"span\",{className:\"google\"},\"Sign In with Google\"))),error&&React.createElement(\"p\",null,error.message));}}]);return SignInGoogleBase;}(Component);var SignInForm=compose(withRouter,withFirebase)(SignInFormBase);var SignInGoogle=compose(withRouter,withFirebase)(SignInGoogleBase);export default SignInPage;export{SignInForm};","map":{"version":3,"sources":["/Users/jiadaye/workspace/cirko/src/components/SignIn/index.js"],"names":["React","Component","withRouter","compose","withFirebase","ROUTES","SignUpLink","PasswordForgetLink","firebaseui","SignInPage","require","INITIAL_STATE","email","password","error","SignInFormBase","props","onSubmit","event","state","firebase","doSignInWithEmailAndPassword","then","setState","history","push","HOME","catch","preventDefault","onPasswordChange","onEmailChange","isInvalid","message","SignInGoogleBase","doSignInWithGoogle","socialAuthUser","user","uid","set","username","displayName","roles","avatarUrl","photoURL","userId","merge","POSTPAGE","textAlign","alignItems","SignInForm","SignInGoogle"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport { compose } from 'recompose';\nimport { withFirebase } from '../Firebase';\nimport * as ROUTES from '../../constants/routes';\n\nimport { SignUpLink } from '../SignUp';\nimport { PasswordForgetLink } from '../PasswordForget';\nimport \"./index.css\"\nimport { Flex, WhiteSpace, InputItem, Button , List} from 'antd-mobile';\nimport * as firebaseui from 'firebaseui'\nconst SignInPage = () => (\n    <div>\n      <div className={\"icon1\"}>\n          <img className={\"image\"} src={require(\"../icons/cirko-trans.png\")} alt=\"\"/>\n      </div>\n        <div className={\"icon2\"}>\n            <h2 className={\"appName\"}>CIRKO</h2>\n        </div>\n        <SignInForm />\n        <br/>\n        <SignInGoogle />\n        <br/>\n        {/*<PasswordForgetLink />*/}\n        <SignUpLink />\n    </div>\n);\nconst INITIAL_STATE = {\n    email: '',\n    password: '',\n    error: null,\n};\nclass SignInFormBase extends Component {\n    constructor(props) {\n        super(props);\n        this.state = { ...INITIAL_STATE };\n    }\n\n    onSubmit = event => {\n        const { email, password } = this.state;\n        this.props.firebase\n            .doSignInWithEmailAndPassword(email, password)\n            .then(() => {\n                this.setState({ ...INITIAL_STATE });\n                this.props.history.push(ROUTES.HOME);\n            })\n            .catch(error => {\n                this.setState({ error });\n            });\n        event.preventDefault();\n    };\n    onPasswordChange = event => {\n         this.setState({ password: event});\n\n    };\n    onEmailChange = event => {\n        this.setState({ email: event });\n\n    };\n    render() {\n        const { email, password, error } = this.state;\n        const isInvalid = password === '' || email === '';\n        return (\n            <div >\n\n            <List>\n                <InputItem\n\n                        name=\"email\"\n                        value={email}\n                        onChange={this.onEmailChange}\n                        type=\"text\"\n                        placeholder=\"Email Address\"\n\n                ></InputItem>\n\n                <WhiteSpace/>\n                <InputItem\n\n                        name=\"password\"\n                        value={password}\n                        onChange={this.onPasswordChange}\n                        type=\"password\"\n                        placeholder=\"Password\"\n\n                ></InputItem>\n            </List>\n                <WhiteSpace/>\n\n                <WhiteSpace/>\n                <List>\n                <Button  type=\"warning\" onClick={this.onSubmit}>\n                    Sign In\n                </Button>\n                {error && <p>{error.message}</p>}\n                </List>\n            </div>\n        );\n    }\n}\n\n\n\nclass SignInGoogleBase extends Component {\n    constructor(props) {\n        super(props);\n        this.state = { error: null };\n    }\n    onSubmit = event => {\n        this.props.firebase\n            .doSignInWithGoogle()\n            .then(socialAuthUser => {\n                // Create a user in your Firebase Realtime Database too\n                return this.props.firebase\n                    .user(socialAuthUser.user.uid)\n                    .set({\n                        username: socialAuthUser.user.displayName,\n                        email: socialAuthUser.user.email,\n                        roles: {},\n                            avatarUrl:socialAuthUser.user.photoURL,\n                            userId:socialAuthUser.user.uid,\n\n                    },\n                        { merge: true });\n            })\n            .then(socialAuthUser => {\n                this.setState({ error: null });\n                this.props.history.push(ROUTES.POSTPAGE);\n            })\n            .catch(error => {\n                this.setState({ error });\n            });\n        event.preventDefault();\n    };\n    render() {\n        const { error } = this.state;\n        return (\n            <div  >\n                <Button  type={'submit'} onClick={this.onSubmit}  >\n                   <div style={{textAlign:\"top\", alignItems:'center'}}>\n                    <img className={\"googleIcon\"} src=\"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg\" alt=\"\"/>\n                       <span className={\"google\"}>Sign In with Google</span>\n                   </div>\n                   </Button>\n                {error && <p>{error.message}</p>}\n            </div>\n        );\n    }\n}\n\n\n\n\nconst SignInForm = compose(\n    withRouter,\n    withFirebase,\n)(SignInFormBase);\n\n\nconst SignInGoogle = compose(\n    withRouter,\n    withFirebase,\n)(SignInGoogleBase);\n\nexport default SignInPage;\nexport { SignInForm };"]},"metadata":{},"sourceType":"module"}