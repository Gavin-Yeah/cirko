{"ast":null,"code":"import\"antd-mobile/lib/button/style\";import _Button from\"antd-mobile/lib/button\";import\"antd-mobile/lib/image-picker/style\";import _ImagePicker from\"antd-mobile/lib/image-picker\";import\"antd-mobile/lib/flex/style\";import _Flex from\"antd-mobile/lib/flex\";import\"antd-mobile/lib/list-view/style\";import _ListView from\"antd-mobile/lib/list-view\";import _defineProperty from\"/Users/jiadaye/workspace/cirko/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/jiadaye/workspace/cirko/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/jiadaye/workspace/cirko/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/jiadaye/workspace/cirko/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/jiadaye/workspace/cirko/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/jiadaye/workspace/cirko/node_modules/@babel/runtime/helpers/esm/inherits\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}import React from'react';import*as ROUTES from\"../../../constants/routes\";import add from\"../../icons/add.png\";import NavBar1 from\"../NavBar1\";var data=[{img:'https://zos.alipayobjects.com/rmsportal/dKbkpPXKfvZzWCM.png',title:'Meet hotel',des:'不是所有的兼职汪都需要风吹日晒',time:'11/12/2019',likes:5,id:1,comments:[],location:''},{img:'https://zos.alipayobjects.com/rmsportal/XmwCzSeJiqpkuMB.png',title:'McDonald\\'s invites you',des:'不是所有的兼职汪都需要风吹日晒',time:'11/12/2019',likes:5,id:2,comments:[],location:'New Zealand'},{img:'https://zos.alipayobjects.com/rmsportal/hfVtzEhPzTUewPm.png',title:'Eat the week',des:'不是所有的兼职汪都需要风吹日晒',time:'11/12/2019',likes:5,id:3,comments:[],location:''}];var NUM_SECTIONS=5;var NUM_ROWS_PER_SECTION=5;var pageIndex=0;var NUM_ROWS=20;var dataBlobs={};var sectionIDs=[];var rowIDs=[];function genData(){var pIndex=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var dataBlob={};for(var i=0;i<NUM_ROWS;i++){var ii=pIndex*NUM_ROWS+i;dataBlob[\"\".concat(ii)]=\"row - \".concat(ii);}return dataBlob;}var Following=/*#__PURE__*/function(_React$Component){_inherits(Following,_React$Component);function Following(props){var _this;_classCallCheck(this,Following);_this=_possibleConstructorReturn(this,_getPrototypeOf(Following).call(this,props));_this.onEndReached=function(event){// load new data\n// hasMore: from backend data, indicates whether it is the last page, here is false\nif(_this.state.isLoading&&!_this.state.hasMore){return;}console.log('reach end',event);_this.setState({isLoading:true});setTimeout(function(){_this.rData=_objectSpread({},_this.rData,{},genData(++pageIndex));_this.setState({dataSource:_this.state.dataSource.cloneWithRows(_this.rData),isLoading:false});},1000);};_this.onClickComment=function(id){_this.props.history.push(\"/home/comments/\".concat(id));};var getSectionData=function getSectionData(dataBlob,sectionID){return dataBlob[sectionID];};var getRowData=function getRowData(dataBlob,sectionID,rowID){return dataBlob[rowID];};var dataSource=new _ListView.DataSource({getRowData:getRowData,getSectionHeaderData:getSectionData,rowHasChanged:function rowHasChanged(row1,row2){return row1!==row2;},sectionHeaderHasChanged:function sectionHeaderHasChanged(s1,s2){return s1!==s2;}});_this.state={dataSource:dataSource,isLoading:true,height:document.documentElement.clientHeight};return _this;}_createClass(Following,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;// you can scroll to the specified position\n// setTimeout(() => this.lv.scrollTo(0, 120), 800);\n// simulate initial Ajax\nsetTimeout(function(){_this2.rData=genData();_this2.setState({dataSource:_this2.state.dataSource.cloneWithRows(_this2.rData),isLoading:false});},600);}},{key:\"render\",value:function render(){var _this3=this;var separator=function separator(sectionID,rowID){return React.createElement(\"div\",{key:\"\".concat(sectionID,\"-\").concat(rowID),style:{backgroundColor:'#F5F5F9',height:8,borderTop:'1px solid #ECECED',borderBottom:'1px solid #ECECED'}});};var index=data.length-1;var row=function row(rowData,sectionID,rowID){if(index<0){index=data.length-1;}var obj=data[index--];return React.createElement(\"div\",{key:rowID,style:{padding:'0 15px'}},rowID==0?React.createElement(\"div\",{style:{height:'70px',background:'white'}}):React.createElement(\"div\",null)/*show the 1st post completely*/,React.createElement(\"div\",{style:{lineHeight:'40px',color:'#888',fontSize:15,borderBottom:'1px solid #F6F6F6'}},obj.location),React.createElement(\"div\",null,React.createElement(_Flex,{style:{padding:'15px 0'}},React.createElement(\"img\",{style:{height:'64px',marginRight:'15px'},src:\"https://zos.alipayobjects.com/rmsportal/dKbkpPXKfvZzWCM.png\",alt:\"\"}),React.createElement(\"div\",{style:{lineHeight:1}},React.createElement(\"div\",null,React.createElement(\"span\",{style:{fontSize:'20px',color:'#4e77a1',fontWeight:'bold'}},obj.username)),React.createElement(\"div\",{style:{color:'#5396a5',fontSize:'18px',marginBottom:'8px',marginTop:'5px'}},obj.time))),React.createElement(_Flex,null,React.createElement(\"div\",{style:{marginBottom:'8px',fontWeight:'bold'}},obj.content)),React.createElement(\"div\",null,React.createElement(_ImagePicker,{files:obj.pictures_url.map(function(item){return{url:item};}),onChange:_this3.onChange,onImageClick:function onImageClick(index,fs){_this3.clickImg(fs[index]);},selectable:false,disableDelete:true,length:3}))),React.createElement(_Flex,null,React.createElement(_Flex.Item,null,React.createElement(_Button,{size:\"small\",style:{background:'#a6daba',color:\"white\",fontWeight:'bold'},onClick:function onClick(){return _this3.onClickComment(obj.id);}},\"Comment\")),React.createElement(_Flex.Item,null,React.createElement(_Button,{size:\"small\",style:{background:'#a6daba',color:\"white\",fontWeight:'bold'}},\"Like\"))));};return React.createElement(\"div\",null,React.createElement(NavBar1,{history:this.props.history}),React.createElement(_ListView,{ref:function ref(el){return _this3.lv=el;},dataSource:this.state.dataSource,renderFooter:function renderFooter(){return React.createElement(\"div\",{style:{padding:30,textAlign:'center'}},_this3.state.isLoading?'Loading...':'Loaded');},renderRow:row,renderSeparator:separator,style:{height:this.state.height,overflow:'auto'},className:\"am-list\",pageSize:4,onScroll:function onScroll(){console.log('scroll');},scrollRenderAheadDistance:500,onEndReached:this.onEndReached,onEndReachedThreshold:10}));}}]);return Following;}(React.Component);export default Following;","map":{"version":3,"sources":["/Users/jiadaye/workspace/cirko/src/components/Home/Following/index.js"],"names":["React","ROUTES","add","NavBar1","data","img","title","des","time","likes","id","comments","location","NUM_SECTIONS","NUM_ROWS_PER_SECTION","pageIndex","NUM_ROWS","dataBlobs","sectionIDs","rowIDs","genData","pIndex","dataBlob","i","ii","Following","props","onEndReached","event","state","isLoading","hasMore","console","log","setState","setTimeout","rData","dataSource","cloneWithRows","onClickComment","history","push","getSectionData","sectionID","getRowData","rowID","DataSource","getSectionHeaderData","rowHasChanged","row1","row2","sectionHeaderHasChanged","s1","s2","height","document","documentElement","clientHeight","separator","backgroundColor","borderTop","borderBottom","index","length","row","rowData","obj","padding","background","lineHeight","color","fontSize","marginRight","fontWeight","username","marginBottom","marginTop","content","pictures_url","map","item","url","onChange","fs","clickImg","el","lv","textAlign","overflow","Component"],"mappings":"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","sourcesContent":["/* eslint no-dupe-keys: 0 */\nimport { ListView, NavBar, Button, Flex, ImagePicker } from 'antd-mobile';\nimport React from 'react'\n\n\nimport * as ROUTES from \"../../../constants/routes\";\nimport add from \"../../icons/add.png\";\nimport NavBar1 from \"../NavBar1\";\nconst data = [\n    {\n        img: 'https://zos.alipayobjects.com/rmsportal/dKbkpPXKfvZzWCM.png',\n        title: 'Meet hotel',\n        des: '不是所有的兼职汪都需要风吹日晒',\n        time: '11/12/2019',\n        likes:5,\n        id:1,\n        comments:[],\n        location:''\n    },\n    {\n        img: 'https://zos.alipayobjects.com/rmsportal/XmwCzSeJiqpkuMB.png',\n        title: 'McDonald\\'s invites you',\n        des: '不是所有的兼职汪都需要风吹日晒',\n        time: '11/12/2019',\n        likes:5,\n        id:2,\n        comments:[],\n        location:'New Zealand'\n    },\n    {\n        img: 'https://zos.alipayobjects.com/rmsportal/hfVtzEhPzTUewPm.png',\n        title: 'Eat the week',\n        des: '不是所有的兼职汪都需要风吹日晒',\n        time: '11/12/2019',\n        likes:5,\n        id:3,\n        comments:[],\n        location:''\n    },\n];\nconst NUM_SECTIONS = 5;\nconst NUM_ROWS_PER_SECTION = 5;\nlet pageIndex = 0;\nconst NUM_ROWS = 20;\nconst dataBlobs = {};\nlet sectionIDs = [];\nlet rowIDs = [];\nfunction genData(pIndex = 0) {\n    const dataBlob = {};\n    for (let i = 0; i < NUM_ROWS; i++) {\n        const ii = (pIndex * NUM_ROWS) + i;\n        dataBlob[`${ii}`] = `row - ${ii}`;\n    }\n    return dataBlob;\n}\n\nclass Following extends React.Component {\n    constructor(props) {\n        super(props);\n        const getSectionData = (dataBlob, sectionID) => dataBlob[sectionID];\n        const getRowData = (dataBlob, sectionID, rowID) => dataBlob[rowID];\n\n        const dataSource = new ListView.DataSource({\n            getRowData,\n            getSectionHeaderData: getSectionData,\n            rowHasChanged: (row1, row2) => row1 !== row2,\n            sectionHeaderHasChanged: (s1, s2) => s1 !== s2,\n        });\n\n        this.state = {\n            dataSource,\n            isLoading: true,\n            height: document.documentElement.clientHeight ,\n        };\n    }\n\n    componentDidMount() {\n        // you can scroll to the specified position\n        // setTimeout(() => this.lv.scrollTo(0, 120), 800);\n\n        // simulate initial Ajax\n        setTimeout(() => {\n            this.rData = genData();\n            this.setState({\n                dataSource: this.state.dataSource.cloneWithRows(this. rData),\n                isLoading: false,\n            });\n        }, 600);\n    }\n\n    onEndReached = (event) => {\n        // load new data\n        // hasMore: from backend data, indicates whether it is the last page, here is false\n        if (this.state.isLoading && !this.state.hasMore) {\n            return;\n        }\n        console.log('reach end', event);\n        this.setState({ isLoading: true });\n        setTimeout(() => {\n            this.rData = { ...this.rData, ...genData(++pageIndex) };\n            this.setState({\n                dataSource: this.state.dataSource.cloneWithRows(this.rData),\n                isLoading: false,\n            });\n        }, 1000);\n    }\n\n    onClickComment =(id)=>{\n\n        this.props.history.push(`/home/comments/${id}`)\n    }\n\n    render() {\n        const separator = (sectionID, rowID) => (\n            <div\n                key={`${sectionID}-${rowID}`}\n                style={{\n                    backgroundColor: '#F5F5F9',\n                    height: 8,\n                    borderTop: '1px solid #ECECED',\n                    borderBottom: '1px solid #ECECED',\n                }}\n            />\n        );\n        let index = data.length - 1;\n        const row = (rowData, sectionID, rowID) => {\n            if (index < 0) {\n                index = data.length - 1;\n            }\n            const obj = data[index--];\n            return (\n\n\n                <div key={rowID} style={{padding: '0 15px'}} >\n\n                    {rowID==0?  <div style={{height:'70px' ,background:'white'}}></div>:<div/> /*show the 1st post completely*/}\n                    <div\n                        style={{\n                            lineHeight: '40px',\n                            color: '#888',\n                            fontSize: 15,\n                            borderBottom: '1px solid #F6F6F6',\n                        }}\n                    >{obj.location}</div>\n                    <div>\n                        <Flex style={{  padding: '15px 0' }}>\n                            <img style={{ height: '64px', marginRight: '15px' }} src={\"https://zos.alipayobjects.com/rmsportal/dKbkpPXKfvZzWCM.png\"} alt=\"\" />\n                            <div style={{ lineHeight: 1 }}>\n\n                                <div><span style={{  fontSize: '20px',color: '#4e77a1',fontWeight: 'bold' }}>{obj.username}</span></div>\n                                <div style={{ color: '#5396a5',fontSize: '18px',marginBottom: '8px',marginTop: '5px'  }}>{obj.time}</div>\n                            </div>\n                        </Flex>\n                        <Flex>\n                            <div style={{ marginBottom: '8px', fontWeight: 'bold' }}>{obj.content}</div>\n                        </Flex>\n                        <div>\n                            <ImagePicker\n                                files={obj.pictures_url.map((item)=>{\n                                    return {url:item}\n                                })}\n\n                                onChange={this.onChange}\n                                onImageClick={(index, fs) => {\n                                    this.clickImg(fs[index]);\n                                }}\n                                selectable={false}\n                                disableDelete={true}\n                                length={3}\n\n                            />\n\n                        </div>\n                    </div>\n\n                    <Flex>\n                        <Flex.Item><Button size='small' style={{background:'#a6daba' ,color:\"white\",fontWeight: 'bold'}} onClick={()=> this.onClickComment(obj.id)}>Comment</Button></Flex.Item>\n                        <Flex.Item><Button size='small' style={{background:'#a6daba',color:\"white\",fontWeight: 'bold'}}>Like</Button></Flex.Item>\n                    </Flex>\n                </div>\n            );\n        };\n        return (\n            <div >\n                <NavBar1 history={this.props.history}/>\n                <ListView\n                    ref={el => this.lv = el}\n                    dataSource={this.state.dataSource}\n\n                    renderFooter={() => (<div style={{ padding: 30, textAlign: 'center' }}>\n                        {this.state.isLoading ? 'Loading...' : 'Loaded'}\n                    </div>)}\n\n                    renderRow={row}\n                    renderSeparator={separator}\n\n                    style={{\n                        height: this.state.height,\n                        overflow: 'auto',\n                    }}\n                    className=\"am-list\"\n                    pageSize={4}\n                    onScroll={() => { console.log('scroll'); }}\n                    scrollRenderAheadDistance={500}\n                    onEndReached={this.onEndReached}\n                    onEndReachedThreshold={10}\n                />\n            </div>\n        );\n    }\n}\n\nexport default Following;\n\n"]},"metadata":{},"sourceType":"module"}