{"ast":null,"code":"import \"antd-mobile/lib/button/style\";\nimport _Button from \"antd-mobile/lib/button\";\nimport \"antd-mobile/lib/image-picker/style\";\nimport _ImagePicker from \"antd-mobile/lib/image-picker\";\nimport \"antd-mobile/lib/flex/style\";\nimport _Flex from \"antd-mobile/lib/flex\";\nimport \"antd-mobile/lib/nav-bar/style\";\nimport _NavBar from \"antd-mobile/lib/nav-bar\";\nimport \"antd-mobile/lib/toast/style\";\nimport _Toast from \"antd-mobile/lib/toast\";\nimport \"antd-mobile/lib/list-view/style\";\nimport _ListView from \"antd-mobile/lib/list-view\";\nvar _jsxFileName = \"/Users/jiadaye/workspace/cirko/src/components/Home/Account/FavPosts/index.js\";\nimport React from 'react';\nimport * as ROUTES from \"../../../../constants/routes\";\nimport add from '../../../icons/add.png';\nimport ImageContainer from \"../../../ImageContainer\";\nimport { get_location } from \"../../../utils/getLocation\";\nimport { get_all_liked_posts, get_all_post } from \"../../../Firebase/getPosts\";\nimport withAuthentication from \"../../../Session/withAuthentication\";\nimport { likes } from \"../../../Firebase/upload\";\nconst data = [{\n  img: 'https://zos.alipayobjects.com/rmsportal/dKbkpPXKfvZzWCM.png',\n  title: 'Meet hotel',\n  des: '不是所有的兼职汪都需要风吹日晒',\n  id: 1\n}, {\n  img: 'https://zos.alipayobjects.com/rmsportal/XmwCzSeJiqpkuMB.png',\n  title: 'McDonald\\'s invites you',\n  des: '不是所有的兼职汪都需要风吹日晒',\n  id: 2\n}, {\n  img: 'https://zos.alipayobjects.com/rmsportal/hfVtzEhPzTUewPm.png',\n  title: 'Eat the week',\n  des: '不是所有的兼职汪都需要风吹日晒',\n  id: 3\n}];\nconst NUM_SECTIONS = 5;\nconst NUM_ROWS_PER_SECTION = 5;\nlet pageIndex = 0;\nconst NUM_ROWS = 20;\nconst dataBlobs = {};\nlet sectionIDs = [];\nlet rowIDs = [];\n\nfunction genData(pIndex = 0) {\n  const dataBlob = {};\n\n  for (let i = 0; i < NUM_ROWS; i++) {\n    const ii = pIndex * NUM_ROWS + i;\n    dataBlob[\"\".concat(ii)] = \"row - \".concat(ii);\n  }\n\n  return dataBlob;\n}\n\nclass FavPosts extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.onClickComment = id => {\n      this.props.history.push(\"/home/comments/\".concat(id));\n    };\n\n    this.clickImg = file => {\n      this.setState({\n        isImgClick: true,\n        currentImg: file.url\n      });\n    };\n\n    this.picClose = () => {\n      console.log(\"picCLose\");\n      this.setState({\n        isImgClick: false\n      });\n    };\n\n    this.likes = postId => {\n      likes(this.props.firebase, this.props.firebase.auth.currentUser.uid, postId).then(result => {\n        console.log(result, postId);\n        this.renderItems();\n      }).catch(err => {\n        console.log(err.toString());\n      });\n    };\n\n    this.renderItems = () => {\n      this.setState({\n        isLoading: true\n      });\n      let list = get_all_liked_posts(this.props.firebase, this.props.firebase.auth.currentUser.uid);\n      list.then(e => {\n        this.setState({\n          data: e\n        });\n      });\n    };\n\n    this.onClickComment = id => {\n      this.props.history.push(\"/home/comments/\".concat(id));\n    };\n\n    const getSectionData = (dataBlob, sectionID) => dataBlob[sectionID];\n\n    const getRowData = (dataBlob, sectionID, rowID) => dataBlob[rowID];\n\n    const dataSource = new _ListView.DataSource({\n      getRowData,\n      getSectionHeaderData: getSectionData,\n      rowHasChanged: (row1, row2) => row1 !== row2,\n      sectionHeaderHasChanged: (s1, s2) => s1 !== s2\n    });\n    this.state = {\n      dataSource,\n      isLoading: true,\n      height: document.documentElement.clientHeight,\n      currentImg: '',\n      isImgClick: false,\n      data: []\n    };\n  }\n\n  componentDidMount() {\n    this.renderItems();\n  }\n\n  render() {\n    if (this.state.isLoading) {\n      _Toast.loading('Loading...', 0.5, () => {\n        console.log('Load complete !!!');\n      });\n    }\n\n    const separator = (sectionID, rowID) => React.createElement(\"div\", {\n      key: \"\".concat(sectionID, \"-\").concat(rowID),\n      style: {\n        backgroundColor: '#F5F5F9',\n        height: 8,\n        borderTop: '1px solid #ECECED',\n        borderBottom: '1px solid #ECECED'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    });\n\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    }, React.createElement(_NavBar, {\n      style: {\n        backgroundColor: '#a6daba',\n        borderBottomLeftRadius: '100%',\n        borderBottomRightRadius: '100%',\n        height: \"7vh\",\n        position: 'fixed',\n        width: \"100%\",\n        top: 0,\n        zIndex: 1\n      },\n      mode: \"light\",\n      rightContent: React.createElement(\"div\", {\n        onClick: () => this.props.history.push(ROUTES.CREATEPOST),\n        style: {\n          width: '40px',\n          marginTop: \"-10px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: add,\n        style: {\n          width: \"40px\"\n        },\n        alt: \"add\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160\n        },\n        __self: this\n      })),\n      leftContent: React.createElement(\"div\", {\n        onClick: () => this.props.history.goBack(),\n        style: {\n          width: '40px',\n          marginTop: \"-20px\",\n          marginLeft: '5px',\n          color: 'White',\n          fontSize: '40px',\n          fontWeight: 'bold'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166\n        },\n        __self: this\n      }, \" <\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      style: {\n        color: \"white\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170\n      },\n      __self: this\n    }, \"Favorite\")), this.state.isImgClick && React.createElement(ImageContainer, {\n      currentImg: this.state.currentImg,\n      picClose: this.picClose,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    }, this.state.data.map((obj, index) => {\n      return React.createElement(\"div\", {\n        key: index,\n        style: {\n          padding: '0 15px',\n          marginBottom: '10px',\n          background: 'white'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177\n        },\n        __self: this\n      }, index == 0 ? React.createElement(\"div\", {\n        style: {\n          height: '11vh'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178\n        },\n        __self: this\n      }) : React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178\n        },\n        __self: this\n      })\n      /*show the 1st post completely*/\n      , React.createElement(\"div\", {\n        style: {\n          lineHeight: '40px',\n          color: '#888',\n          fontSize: 15,\n          borderBottom: '1px solid #F6F6F6',\n          background: '#ededed'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179\n        },\n        __self: this\n      }, obj.place ? React.createElement(\"img\", {\n        style: {\n          width: \"5vw\"\n        },\n        src: \"https://image.flaticon.com/icons/png/128/149/149060.png\",\n        alt: \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189\n        },\n        __self: this\n      }) : \"\", obj.place), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191\n        },\n        __self: this\n      }, React.createElement(_Flex, {\n        style: {\n          padding: '15px 0'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        style: {\n          height: '64px',\n          marginRight: '15px'\n        },\n        src: obj.userAvatar,\n        alt: \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        style: {\n          lineHeight: 1\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        style: {\n          fontSize: '20px',\n          color: '#4e77a1',\n          fontWeight: 'bold'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196\n        },\n        __self: this\n      }, obj.username)), React.createElement(\"div\", {\n        style: {\n          color: '#5396a5',\n          fontSize: '18px',\n          marginBottom: '8px',\n          marginTop: '5px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197\n        },\n        __self: this\n      }, new Date(obj.time).toLocaleString()))), React.createElement(_Flex, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        style: {\n          marginBottom: '8px',\n          fontWeight: 'bold'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201\n        },\n        __self: this\n      }, obj.content)), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203\n        },\n        __self: this\n      }, React.createElement(_ImagePicker, {\n        files: obj.pictures_url.map(item => {\n          return {\n            url: item\n          };\n        }),\n        onChange: this.onChange,\n        onImageClick: (index, fs) => {\n          this.clickImg(fs[index]);\n        },\n        selectable: false,\n        disableDelete: true,\n        length: 3,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204\n        },\n        __self: this\n      }))), React.createElement(_Flex, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 223\n        },\n        __self: this\n      }, React.createElement(_Flex.Item, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 224\n        },\n        __self: this\n      }, React.createElement(_Button, {\n        size: \"small\",\n        activeStyle: {\n          background: '#7fc4a7'\n        },\n        style: {\n          background: '#a6daba',\n          color: \"#ecfcee\",\n          fontWeight: 'bold'\n        },\n        onClick: () => this.onClickComment(obj.postId),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 224\n        },\n        __self: this\n      }, \"Comment(\", obj.comments.length, \")\")), React.createElement(_Flex.Item, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 225\n        },\n        __self: this\n      }, React.createElement(_Button, {\n        size: \"small\",\n        activeStyle: {\n          background: '#7fc4a7'\n        },\n        style: {\n          background: '#a6daba',\n          color: \"#ecfcee\",\n          fontWeight: 'bold'\n        },\n        onClick: () => this.likes(obj.postId),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 225\n        },\n        __self: this\n      }, \"Likes \", obj.likes !== 0 ? '(' + obj.likes.length + ')' : \"\"))));\n    })));\n  }\n\n}\n\nexport default withAuthentication(FavPosts);","map":{"version":3,"sources":["/Users/jiadaye/workspace/cirko/src/components/Home/Account/FavPosts/index.js"],"names":["React","ROUTES","add","ImageContainer","get_location","get_all_liked_posts","get_all_post","withAuthentication","likes","data","img","title","des","id","NUM_SECTIONS","NUM_ROWS_PER_SECTION","pageIndex","NUM_ROWS","dataBlobs","sectionIDs","rowIDs","genData","pIndex","dataBlob","i","ii","FavPosts","Component","constructor","props","onClickComment","history","push","clickImg","file","setState","isImgClick","currentImg","url","picClose","console","log","postId","firebase","auth","currentUser","uid","then","result","renderItems","catch","err","toString","isLoading","list","e","getSectionData","sectionID","getRowData","rowID","dataSource","DataSource","getSectionHeaderData","rowHasChanged","row1","row2","sectionHeaderHasChanged","s1","s2","state","height","document","documentElement","clientHeight","componentDidMount","render","loading","separator","backgroundColor","borderTop","borderBottom","borderBottomLeftRadius","borderBottomRightRadius","position","width","top","zIndex","CREATEPOST","marginTop","goBack","marginLeft","color","fontSize","fontWeight","map","obj","index","padding","marginBottom","background","lineHeight","place","marginRight","userAvatar","username","Date","time","toLocaleString","content","pictures_url","item","onChange","fs","comments","length"],"mappings":"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","sourcesContent":["/* eslint no-dupe-keys: 0 */\nimport { ListView, NavBar, Button, Flex, Icon, Toast, ImagePicker } from 'antd-mobile';\nimport React from 'react'\n\n\nimport * as ROUTES from \"../../../../constants/routes\";\n\nimport add from '../../../icons/add.png'\nimport ImageContainer from \"../../../ImageContainer\";\nimport { get_location } from \"../../../utils/getLocation\";\nimport { get_all_liked_posts, get_all_post } from \"../../../Firebase/getPosts\";\nimport withAuthentication from \"../../../Session/withAuthentication\";\nimport { likes } from \"../../../Firebase/upload\";\nconst data = [\n    {\n        img: 'https://zos.alipayobjects.com/rmsportal/dKbkpPXKfvZzWCM.png',\n        title: 'Meet hotel',\n        des: '不是所有的兼职汪都需要风吹日晒',\n        id:1,\n    },\n    {\n        img: 'https://zos.alipayobjects.com/rmsportal/XmwCzSeJiqpkuMB.png',\n        title: 'McDonald\\'s invites you',\n        des: '不是所有的兼职汪都需要风吹日晒',\n        id:2,\n    },\n    {\n        img: 'https://zos.alipayobjects.com/rmsportal/hfVtzEhPzTUewPm.png',\n        title: 'Eat the week',\n        des: '不是所有的兼职汪都需要风吹日晒',\n        id:3,\n    },\n];\nconst NUM_SECTIONS = 5;\nconst NUM_ROWS_PER_SECTION = 5;\nlet pageIndex = 0;\nconst NUM_ROWS = 20;\nconst dataBlobs = {};\nlet sectionIDs = [];\nlet rowIDs = [];\nfunction genData(pIndex = 0) {\n    const dataBlob = {};\n    for (let i = 0; i < NUM_ROWS; i++) {\n        const ii = (pIndex * NUM_ROWS) + i;\n        dataBlob[`${ii}`] = `row - ${ii}`;\n    }\n    return dataBlob;\n}\n\nclass FavPosts extends React.Component {\n    constructor(props) {\n        super(props);\n        const getSectionData = (dataBlob, sectionID) => dataBlob[sectionID];\n        const getRowData = (dataBlob, sectionID, rowID) => dataBlob[rowID];\n\n        const dataSource = new ListView.DataSource({\n            getRowData,\n            getSectionHeaderData: getSectionData,\n            rowHasChanged: (row1, row2) => row1 !== row2,\n            sectionHeaderHasChanged: (s1, s2) => s1 !== s2,\n        });\n\n        this.state = {\n            dataSource,\n            isLoading: true,\n            height: document.documentElement.clientHeight ,\n            currentImg:'',\n            isImgClick:false,\n            data:[]\n        };\n    }\n\n\n\n\n    onClickComment =(id)=>{\n\n        this.props.history.push(`/home/comments/${id}`)\n    }\n\n    clickImg = (file)=>{\n\n        this.setState({\n            isImgClick:true,\n            currentImg:file.url\n        })\n    }\n    picClose=()=>{\n        console.log(\"picCLose\")\n        this.setState({\n            isImgClick:false\n        })\n    }\n\n    likes = (postId)=>{\n\n        likes(this.props.firebase,this.props.firebase.auth.currentUser.uid,postId).then((result)=>{\n            console.log(result,postId);\n            this.renderItems()\n\n        }).catch(err=>{\n            console.log(err.toString())\n        });\n\n    }\n\n    componentDidMount() {\n      this.renderItems();\n\n    }\n\n    renderItems = ()=>{\n        this.setState({\n            isLoading:true\n        })\n\n\n    let list =  get_all_liked_posts(this.props.firebase,this.props.firebase.auth.currentUser.uid);\n        list.then((e)=>{\n            this.setState({\n                data:e\n            })\n        })\n    }\n\n\n    onClickComment =(id)=>{\n\n        this.props.history.push(`/home/comments/${id}`)\n    }\n\n\n    render() {\n        if(this.state.isLoading){\n            Toast.loading('Loading...', 0.5, () => {\n                console.log('Load complete !!!');\n            });\n        }\n        const separator = (sectionID, rowID) => (\n            <div\n                key={`${sectionID}-${rowID}`}\n                style={{\n                    backgroundColor: '#F5F5F9',\n                    height: 8,\n                    borderTop: '1px solid #ECECED',\n                    borderBottom: '1px solid #ECECED',\n                }}\n            />\n        );\n\n\n        return (\n            <div >\n                <NavBar\n                    style={{backgroundColor: '#a6daba', borderBottomLeftRadius:'100%', borderBottomRightRadius:'100%',  height:\"7vh\",position:'fixed',width:\"100%\", top:0,zIndex:1}}\n                    mode=\"light\"\n\n                    rightContent={\n                        <div onClick={()=>this.props.history.push(ROUTES.CREATEPOST)} style={{width: '40px',marginTop:\"-10px\",}}>\n                            <img src={add} style={{width:\"40px\"}} alt=\"add\"/>\n                        </div>\n\n                    }\n\n                    leftContent={\n                        <div onClick={()=>  this.props.history.goBack()}  style={{width: '40px',marginTop:\"-20px\", marginLeft:'5px', color:'White', fontSize:'40px',fontWeight: 'bold'}}> &lt;\n                        </div>\n                    }\n\n                ><h1 style={{color:\"white\",}}>Favorite</h1>\n                </NavBar>\n                {this.state.isImgClick&&<ImageContainer currentImg={this.state.currentImg} picClose={this.picClose}/>}\n                <div >\n                    {\n                        this.state.data.map((obj,index)=>{\n                            return(\n                                <div key={index} style={{ padding: '0 15px', marginBottom:'10px', background:'white' }}>\n                                    {index==0?  <div style={{height:'11vh'}}></div>:<div/> /*show the 1st post completely*/}\n                                    <div\n                                        style={{\n                                            lineHeight: '40px',\n                                            color: '#888',\n                                            fontSize: 15,\n                                            borderBottom: '1px solid #F6F6F6',\n                                            background:'#ededed',\n\n\n                                        }}\n                                    >{obj.place?<img style={{width:\"5vw\"}} src=\"https://image.flaticon.com/icons/png/128/149/149060.png\" alt=\"\"/>:\"\"}{obj.place}</div>\n\n                                    <div>\n                                        <Flex style={{  padding: '15px 0' }}>\n                                            <img style={{ height: '64px', marginRight: '15px' }} src={obj.userAvatar} alt=\"\" />\n                                            <div style={{ lineHeight: 1 }}>\n\n                                                <div><span style={{  fontSize: '20px',color: '#4e77a1',fontWeight: 'bold' }}>{obj.username}</span></div>\n                                                <div style={{ color: '#5396a5',fontSize: '18px',marginBottom: '8px',marginTop: '5px'  }}>{(new Date(obj.time)).toLocaleString()}</div>\n                                            </div>\n                                        </Flex>\n                                        <Flex>\n                                            <div style={{ marginBottom: '8px', fontWeight: 'bold' }}>{obj.content}</div>\n                                        </Flex>\n                                        <div>\n                                            <ImagePicker\n                                                files={obj.pictures_url.map((item)=>{\n                                                    return {url:item}\n                                                })}\n\n                                                onChange={this.onChange}\n                                                onImageClick={(index, fs) => {\n                                                    this.clickImg(fs[index]);\n                                                }}\n                                                selectable={false}\n                                                disableDelete={true}\n                                                length={3}\n\n\n                                            />\n\n                                        </div>\n                                    </div>\n\n                                    <Flex>\n                                        <Flex.Item><Button size='small' activeStyle={{background:'#7fc4a7'}} style={{background:'#a6daba' ,color:\"#ecfcee\",fontWeight: 'bold'}} onClick={()=> this.onClickComment(obj.postId)}>Comment({obj.comments.length})</Button></Flex.Item>\n                                        <Flex.Item><Button size='small' activeStyle={{background:'#7fc4a7'}} style={{background:'#a6daba',color:\"#ecfcee\",fontWeight: 'bold'}} onClick={()=>this.likes(obj.postId)}>Likes {obj.likes!==0?'('+obj.likes.length+')':\"\"}</Button></Flex.Item>\n                                    </Flex>\n                                </div>\n                            )\n                        })\n                    }\n\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default withAuthentication(FavPosts);\n\n"]},"metadata":{},"sourceType":"module"}