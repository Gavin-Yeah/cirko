{"ast":null,"code":"import\"antd-mobile/lib/button/style\";import _Button from\"antd-mobile/lib/button\";import\"antd-mobile/lib/image-picker/style\";import _ImagePicker from\"antd-mobile/lib/image-picker\";import\"antd-mobile/lib/flex/style\";import _Flex from\"antd-mobile/lib/flex\";import\"antd-mobile/lib/nav-bar/style\";import _NavBar from\"antd-mobile/lib/nav-bar\";import\"antd-mobile/lib/toast/style\";import _Toast from\"antd-mobile/lib/toast\";import _classCallCheck from\"/Users/jiadaye/workspace/cirko/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/jiadaye/workspace/cirko/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/jiadaye/workspace/cirko/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/jiadaye/workspace/cirko/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/jiadaye/workspace/cirko/node_modules/@babel/runtime/helpers/esm/inherits\";import React from'react';import*as ROUTES from\"../../../../constants/routes\";import add from'../../../icons/add.png';import{get_all_post_by_id}from\"../../../Firebase/getPosts\";import withAuthentication from\"../../../Session/withAuthentication\";import ImageContainer from\"../../../ImageContainer\";var MyPosts=/*#__PURE__*/function(_React$Component){_inherits(MyPosts,_React$Component);function MyPosts(props){var _this;_classCallCheck(this,MyPosts);_this=_possibleConstructorReturn(this,_getPrototypeOf(MyPosts).call(this,props));_this.onClickComment=function(id){_this.props.history.push(\"/home/comments/\".concat(id));};_this.clickImg=function(file){_this.setState({isImgClick:true,currentImg:file.url});};_this.picClose=function(){console.log(\"picCLose\");_this.setState({isImgClick:false});};_this.state={isLoading:true,height:document.documentElement.clientHeight,data:[],imgHeight:176,currentImg:'',isImgClick:false};return _this;}_createClass(MyPosts,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;this.setState({isLoading:true});// you can scroll to the specified position\n// setTimeout(() => this.lv.scrollTo(0, 120), 800);\nvar promise=get_all_post_by_id(this.props.firebase,this.props.firebase.auth.currentUser.uid);promise.then(function(res){_this2.setState({data:res,isLoading:false});});}},{key:\"render\",value:function render(){var _this3=this;if(this.state.isLoading){_Toast.loading('Loading...',0.5,function(){console.log('Load complete !!!');});}return React.createElement(\"div\",null,React.createElement(_NavBar,{style:{backgroundColor:'#a6daba',borderBottomLeftRadius:'100%',borderBottomRightRadius:'100%',height:\"7vh\",position:'fixed',width:\"100%\",top:0,zIndex:1},mode:\"light\",rightContent:React.createElement(\"div\",{onClick:function onClick(){return _this3.props.history.push(ROUTES.CREATEPOST);},style:{width:'40px',marginTop:\"-10px\"}},React.createElement(\"img\",{src:add,style:{width:\"40px\"},alt:\"add\"})),leftContent:React.createElement(\"div\",{onClick:function onClick(){return _this3.props.history.goBack();},style:{width:'40px',marginTop:\"-20px\",marginLeft:'5px',color:'White',fontSize:'40px',fontWeight:'bold'}},\" <\")},React.createElement(\"h1\",{style:{color:\"white\"}},\"My Posts\")),this.state.isImgClick&&React.createElement(ImageContainer,{currentImg:this.state.currentImg,picClose:this.picClose}),React.createElement(\"div\",null,this.state.data.map(function(obj,index){return React.createElement(\"div\",{key:index,style:{padding:'0 15px',marginBottom:'10px',background:'white'}},index==0?React.createElement(\"div\",{style:{height:'11vh'}}):React.createElement(\"div\",null)/*show the 1st post completely*/,React.createElement(\"div\",{style:{lineHeight:'40px',color:'#888',fontSize:15,borderBottom:'1px solid #F6F6F6',background:'#ededed'}},obj.place?React.createElement(\"img\",{style:{width:\"5vw\"},src:\"https://image.flaticon.com/icons/png/128/149/149060.png\",alt:\"\"}):\"\",React.createElement(\"a\",{href:\"http://maps.google.com/?q=\"+obj.place,target:\"_blank\"},obj.place)),React.createElement(\"div\",null,React.createElement(_Flex,{style:{padding:'15px 0'}},React.createElement(\"img\",{style:{height:'64px',marginRight:'15px'},src:obj.userAvatar,alt:\"\"}),React.createElement(\"div\",{style:{lineHeight:1}},React.createElement(\"div\",null,React.createElement(\"span\",{style:{fontSize:'20px',color:'#4e77a1',fontWeight:'bold'}},obj.username)),React.createElement(\"div\",{style:{color:'#5396a5',fontSize:'18px',marginBottom:'8px',marginTop:'5px'}},new Date(obj.time).toLocaleString()))),React.createElement(_Flex,null,React.createElement(\"div\",{style:{marginBottom:'8px',fontWeight:'bold'}},obj.content)),React.createElement(\"div\",null,React.createElement(_ImagePicker,{files:obj.pictures_url.map(function(item){return{url:item};}),onChange:_this3.onChange,onImageClick:function onImageClick(index,fs){_this3.clickImg(fs[index]);},selectable:false,disableDelete:true,length:3}))),React.createElement(_Flex,null,React.createElement(_Flex.Item,null,React.createElement(_Button,{size:\"small\",activeStyle:{background:'#7fc4a7'},style:{background:'#a6daba',color:\"#ecfcee\",fontWeight:'bold'},onClick:function onClick(){return _this3.onClickComment(obj.postId);}},\"Comment(\",obj.comments.length,\")\"))));})));}}]);return MyPosts;}(React.Component);export default withAuthentication(MyPosts);","map":{"version":3,"sources":["/Users/jiadaye/workspace/cirko/src/components/Home/Account/MyPosts/index.js"],"names":["React","ROUTES","add","get_all_post_by_id","withAuthentication","ImageContainer","MyPosts","props","onClickComment","id","history","push","clickImg","file","setState","isImgClick","currentImg","url","picClose","console","log","state","isLoading","height","document","documentElement","clientHeight","data","imgHeight","promise","firebase","auth","currentUser","uid","then","res","loading","backgroundColor","borderBottomLeftRadius","borderBottomRightRadius","position","width","top","zIndex","CREATEPOST","marginTop","goBack","marginLeft","color","fontSize","fontWeight","map","obj","index","padding","marginBottom","background","lineHeight","borderBottom","place","marginRight","userAvatar","username","Date","time","toLocaleString","content","pictures_url","item","onChange","fs","postId","comments","length","Component"],"mappings":"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","sourcesContent":["import { Button, Flex, ImagePicker, NavBar, Toast } from 'antd-mobile';\nimport React from 'react'\n\n\nimport * as ROUTES from \"../../../../constants/routes\";\n\nimport add from '../../../icons/add.png'\nimport { get_all_post_by_id } from \"../../../Firebase/getPosts\";\nimport withAuthentication from \"../../../Session/withAuthentication\";\nimport ImageContainer from \"../../../ImageContainer\";\n\n\nclass MyPosts extends React.Component {\n    constructor(props) {\n        super(props);\n\n\n        this.state = {\n\n            isLoading: true,\n            height: document.documentElement.clientHeight,\n            data: [],\n            imgHeight: 176,\n            currentImg: '',\n            isImgClick: false,\n        };\n    }\n\n    onClickComment = (id) => {\n\n        this.props.history.push(`/home/comments/${id}`)\n    }\n\n    clickImg = (file) => {\n\n        this.setState({\n            isImgClick: true,\n            currentImg: file.url\n        })\n    }\n    picClose = () => {\n        console.log(\"picCLose\")\n        this.setState({\n            isImgClick: false\n        })\n    }\n\n    componentDidMount() {\n        this.setState({\n            isLoading: true\n        })\n        // you can scroll to the specified position\n        // setTimeout(() => this.lv.scrollTo(0, 120), 800);\n        const promise = get_all_post_by_id(this.props.firebase, this.props.firebase.auth.currentUser.uid)\n        promise.then((res) => {\n            this.setState({\n                data: res,\n                isLoading: false\n            })\n\n        })\n\n\n    }\n\n\n    render() {\n        if (this.state.isLoading) {\n            Toast.loading('Loading...', 0.5, () => {\n                console.log('Load complete !!!');\n            });\n        }\n\n\n        return (\n            <div>\n                <NavBar\n\n                    style={{\n                        backgroundColor: '#a6daba',\n                        borderBottomLeftRadius: '100%',\n                        borderBottomRightRadius: '100%',\n                        height: \"7vh\",\n                        position: 'fixed',\n                        width: \"100%\",\n                        top: 0,\n                        zIndex: 1\n                    }}\n                    mode=\"light\"\n\n                    rightContent={\n                        <div onClick={() => this.props.history.push(ROUTES.CREATEPOST)}\n                             style={{width: '40px', marginTop: \"-10px\",}}>\n                            <img src={add} style={{width: \"40px\"}} alt=\"add\"/>\n                        </div>\n\n                    }\n                    leftContent={\n                        <div onClick={() => this.props.history.goBack()} style={{\n                            width: '40px',\n                            marginTop: \"-20px\",\n                            marginLeft: '5px',\n                            color: 'White',\n                            fontSize: '40px',\n                            fontWeight: 'bold'\n                        }}> &lt;\n                        </div>\n                    }\n\n                ><h1 style={{color: \"white\",}}>My Posts</h1>\n                </NavBar>\n\n                {this.state.isImgClick && <ImageContainer currentImg={this.state.currentImg} picClose={this.picClose}/>}\n\n                <div>\n                    {\n                        this.state.data.map((obj, index) => {\n                            return (\n                                <div key={index} style={{padding: '0 15px', marginBottom: '10px', background: 'white'}}>\n                                    {index == 0 ? <div style={{height: '11vh'}}></div> :\n                                        <div/> /*show the 1st post completely*/}\n                                    <div\n                                        style={{\n                                            lineHeight: '40px',\n                                            color: '#888',\n                                            fontSize: 15,\n                                            borderBottom: '1px solid #F6F6F6',\n                                            background: '#ededed',\n\n\n                                        }}\n                                    >\n                                        {obj.place?<img style={{width:\"5vw\"}} src=\"https://image.flaticon.com/icons/png/128/149/149060.png\" alt=\"\"/>:\"\"}<a\n                                        href={\"http://maps.google.com/?q=\"+obj.place} target={\"_blank\"}>{obj.place}</a>\n\n                                    </div>\n\n                                    <div>\n                                        <Flex style={{padding: '15px 0'}}>\n                                            <img style={{height: '64px', marginRight: '15px'}} src={obj.userAvatar}\n                                                 alt=\"\"/>\n                                            <div style={{lineHeight: 1}}>\n\n                                                <div><span style={{\n                                                    fontSize: '20px',\n                                                    color: '#4e77a1',\n                                                    fontWeight: 'bold'\n                                                }}>{obj.username}</span></div>\n                                                <div style={{\n                                                    color: '#5396a5',\n                                                    fontSize: '18px',\n                                                    marginBottom: '8px',\n                                                    marginTop: '5px'\n                                                }}>{(new Date(obj.time)).toLocaleString()}</div>\n                                            </div>\n                                        </Flex>\n                                        <Flex>\n                                            <div style={{marginBottom: '8px', fontWeight: 'bold'}}>{obj.content}</div>\n                                        </Flex>\n                                        <div>\n                                            <ImagePicker\n                                                files={obj.pictures_url.map((item) => {\n                                                    return {url: item}\n                                                })}\n\n                                                onChange={this.onChange}\n                                                onImageClick={(index, fs) => {\n                                                    this.clickImg(fs[index]);\n                                                }}\n                                                selectable={false}\n                                                disableDelete={true}\n                                                length={3}\n\n\n                                            />\n\n                                        </div>\n                                    </div>\n\n                                    <Flex>\n                                        <Flex.Item><Button size='small' activeStyle={{background: '#7fc4a7'}} style={{\n                                            background: '#a6daba',\n                                            color: \"#ecfcee\",\n                                            fontWeight: 'bold'\n                                        }}\n                                                           onClick={() => this.onClickComment(obj.postId)}>Comment({obj.comments.length})</Button></Flex.Item>\n                                    </Flex>\n                                </div>\n                            )\n                        })\n                    }\n\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default withAuthentication(MyPosts);\n\n"]},"metadata":{},"sourceType":"module"}