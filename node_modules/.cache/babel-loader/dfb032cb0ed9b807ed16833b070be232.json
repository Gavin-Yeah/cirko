{"ast":null,"code":"import \"antd-mobile/lib/button/style\";\nimport _Button from \"antd-mobile/lib/button\";\nimport \"antd-mobile/lib/image-picker/style\";\nimport _ImagePicker from \"antd-mobile/lib/image-picker\";\nimport \"antd-mobile/lib/icon/style\";\nimport _Icon from \"antd-mobile/lib/icon\";\nimport \"antd-mobile/lib/input-item/style\";\nimport _InputItem from \"antd-mobile/lib/input-item\";\nimport \"antd-mobile/lib/flex/style\";\nimport _Flex from \"antd-mobile/lib/flex\";\nimport \"antd-mobile/lib/slider/style\";\nimport _Slider from \"antd-mobile/lib/slider\";\nimport \"antd-mobile/lib/toast/style\";\nimport _Toast from \"antd-mobile/lib/toast\";\nimport \"antd-mobile/lib/list-view/style\";\nimport _ListView from \"antd-mobile/lib/list-view\";\nvar _jsxFileName = \"/Users/jiadaye/workspace/cirko/src/components/Home/PostPage/index.js\";\nimport React from 'react';\nimport * as ROUTES from \"../../../constants/routes\";\nimport add from \"../../icons/add.png\";\nimport { get_all_post, get_all_post_by_uid } from \"../../Firebase/getPosts\";\nimport { get_location } from \"../../utils/getLocation\";\nimport { withAuthentication } from \"../../Session\";\nimport ImageContainer from \"../../ImageContainer\";\nimport NavBar1 from \"../NavBar1\"; // let data = [\n//     {\n//         img: 'https://zos.alipayobjects.com/rmsportal/dKbkpPXKfvZzWCM.png',\n//         title: 'Meet hotel',\n//         des: '不是所有的兼职汪都需要风吹日晒',\n//         time: '11/12/2019',\n//         likes:5,\n//         id:1,\n//         comments:[],\n//         location:''\n//     },\n//     {\n//         img: 'https://zos.alipayobjects.com/rmsportal/XmwCzSeJiqpkuMB.png',\n//         title: 'McDonald\\'s invites you',\n//         des: '不是所有的兼职汪都需要风吹日晒',\n//         time: '11/12/2019',\n//         likes:5,\n//         id:2,\n//         comments:[],\n//         location:'New Zealand'\n//     },\n//     {\n//         img: 'https://zos.alipayobjects.com/rmsportal/hfVtzEhPzTUewPm.png',\n//         title: 'Eat the week',\n//         des: '不是所有的兼职汪都需要风吹日晒',\n//         time: '11/12/2019',\n//         likes:5,\n//         id:3,\n//         comments:[],\n//         location:''\n//     },\n// ];\n\nlet pageIndex = 0;\n\nclass PostPage extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.onClickComment = id => {\n      this.props.history.push(\"/home/comments/\".concat(id));\n    };\n\n    this.clickImg = file => {\n      this.setState({\n        isImgClick: true,\n        currentImg: file.url\n      });\n    };\n\n    this.picClose = () => {\n      console.log(\"picCLose\");\n      this.setState({\n        isImgClick: false\n      });\n    };\n\n    this.slider = e => {\n      console.log(e);\n      this.setState({\n        distance: e\n      });\n    };\n\n    this.likes = () => {\n      get_location();\n    };\n\n    const getSectionData = (dataBlob, sectionID) => dataBlob[sectionID];\n\n    const getRowData = (dataBlob, sectionID, rowID) => dataBlob[rowID];\n\n    const dataSource = new _ListView.DataSource({\n      getRowData,\n      getSectionHeaderData: getSectionData,\n      rowHasChanged: (row1, row2) => row1 !== row2,\n      sectionHeaderHasChanged: (s1, s2) => s1 !== s2\n    });\n    this.state = {\n      dataSource,\n      isLoading: true,\n      height: document.documentElement.clientHeight,\n      distance: 1000,\n      currentImg: '',\n      isImgClick: false,\n      hasMore: false,\n      data: [{\n        pictures_url: [],\n        title: 'Eat the week',\n        des: '不是所有的兼职汪都需要风吹日晒',\n        time: '11/12/2019',\n        likes: 5,\n        id: 3,\n        comments: [],\n        location: 'ha'\n      }]\n    };\n  }\n\n  componentDidMount() {\n    const callback = list => {\n      this.setState({\n        data: list\n      }); // setTimeout(() => {\n      //     this.rData = this.genData();\n      //     this.setState({\n      //         dataSource: this.state.dataSource.cloneWithRows(this.rData),\n      //         isLoading: false,\n      //     });\n      // }, 1000);\n    }; //console.log(a)\n\n\n    get_all_post(this.props.firebase, callback); // console.log(this.props.firebase.db.collection(\"posts\").get())\n    // you can scroll to the specified position\n    // setTimeout(() => this.lv.scrollTo(0, 120), 800);\n    // simulate initial Ajax\n  }\n\n  render() {\n    if (this.state.isLoading) {\n      _Toast.loading('Loading...', 0.5, () => {\n        console.log('Load complete !!!');\n      });\n    }\n\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152\n      },\n      __self: this\n    }, this.state.isImgClick && React.createElement(ImageContainer, {\n      currentImg: this.state.currentImg,\n      picClose: this.picClose,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    }), React.createElement(NavBar1, {\n      history: this.props.history,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    }), React.createElement(_Flex, {\n      style: {\n        background: \"white\",\n        height: \"8vh\",\n        position: 'fixed',\n        width: \"100%\",\n        top: \"3vh\",\n        zIndex: 1\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    }, React.createElement(_Flex.Item, {\n      style: {\n        flex: '8'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }, \" \", React.createElement(_Slider, {\n      style: {\n        marginLeft: \"20px\",\n        marginTop: '3vh'\n      },\n      defaultValue: this.state.distance,\n      min: 0,\n      max: 50000,\n      step: 100,\n      value: this.state.distance,\n      onChange: e => this.slider(e),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    })), React.createElement(_Flex.Item, {\n      style: {\n        flex: '2',\n        marginTop: '3vh',\n        fontSize: \"20px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169\n      },\n      __self: this\n    }, React.createElement(_InputItem, {\n      type: \"number\",\n      onChange: e => {\n        this.setState({\n          distance: e\n        });\n      },\n      value: this.state.distance,\n      extra: \"m\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170\n      },\n      __self: this\n    })), React.createElement(_Flex.Item, {\n      style: {\n        flex: '1'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177\n      },\n      __self: this\n    }, React.createElement(_Icon, {\n      size: \"small\",\n      style: {\n        borderRadius: '100%',\n        background: \"lightgrey\",\n        marginTop: '3vh',\n        textAlign: 'center',\n        width: '30px',\n        fontSize: \"4vh\"\n      },\n      type: 'check',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178\n      },\n      __self: this\n    }))), this.state.data.map((obj, index) => {\n      return React.createElement(\"div\", {\n        key: obj.postId,\n        style: {\n          padding: '0 15px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183\n        },\n        __self: this\n      }, index == 0 ? React.createElement(\"div\", {\n        style: {\n          height: '10vh',\n          background: 'white'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184\n        },\n        __self: this\n      }) : React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184\n        },\n        __self: this\n      })\n      /*show the 1st post completely*/\n      , React.createElement(\"div\", {\n        style: {\n          lineHeight: '40px',\n          color: '#888',\n          fontSize: 15,\n          borderBottom: '1px solid #F6F6F6'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185\n        },\n        __self: this\n      }, obj.location), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193\n        },\n        __self: this\n      }, React.createElement(_Flex, {\n        style: {\n          padding: '15px 0'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        style: {\n          height: '64px',\n          marginRight: '15px'\n        },\n        src: obj.userAvatar,\n        alt: \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        style: {\n          lineHeight: 1\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        style: {\n          fontSize: '20px',\n          color: '#4e77a1',\n          fontWeight: 'bold'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198\n        },\n        __self: this\n      }, obj.username)), React.createElement(\"div\", {\n        style: {\n          color: '#5396a5',\n          fontSize: '18px',\n          marginBottom: '8px',\n          marginTop: '5px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199\n        },\n        __self: this\n      }, obj.time))), React.createElement(_Flex, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        style: {\n          marginBottom: '8px',\n          fontWeight: 'bold'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203\n        },\n        __self: this\n      }, obj.content)), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205\n        },\n        __self: this\n      }, React.createElement(_ImagePicker, {\n        files: obj.pictures_url.map(item => {\n          return {\n            url: item\n          };\n        }),\n        onChange: this.onChange,\n        onImageClick: (index, fs) => {\n          this.clickImg(fs[index]);\n        },\n        selectable: false,\n        disableDelete: true,\n        length: 3,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206\n        },\n        __self: this\n      }))), React.createElement(_Flex, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 224\n        },\n        __self: this\n      }, React.createElement(_Flex.Item, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 225\n        },\n        __self: this\n      }, React.createElement(_Button, {\n        size: \"small\",\n        style: {\n          background: '#5396a5',\n          color: \"#ecfcee\",\n          fontWeight: 'bold'\n        },\n        onClick: () => this.onClickComment(obj.postId),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 225\n        },\n        __self: this\n      }, \"Comment\")), React.createElement(_Flex.Item, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 226\n        },\n        __self: this\n      }, React.createElement(_Button, {\n        size: \"small\",\n        style: {\n          background: '#5396a5',\n          color: \"#ecfcee\",\n          fontWeight: 'bold'\n        },\n        onClick: this.likes,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 226\n        },\n        __self: this\n      }, \"Likes \", !!!obj.likes ? '(' + obj.likes + ')' : \"\"))));\n    }));\n  }\n\n}\n\nexport default withAuthentication(PostPage);","map":{"version":3,"sources":["/Users/jiadaye/workspace/cirko/src/components/Home/PostPage/index.js"],"names":["React","ROUTES","add","get_all_post","get_all_post_by_uid","get_location","withAuthentication","ImageContainer","NavBar1","pageIndex","PostPage","Component","constructor","props","onClickComment","id","history","push","clickImg","file","setState","isImgClick","currentImg","url","picClose","console","log","slider","e","distance","likes","getSectionData","dataBlob","sectionID","getRowData","rowID","dataSource","DataSource","getSectionHeaderData","rowHasChanged","row1","row2","sectionHeaderHasChanged","s1","s2","state","isLoading","height","document","documentElement","clientHeight","hasMore","data","pictures_url","title","des","time","comments","location","componentDidMount","callback","list","firebase","render","loading","background","position","width","top","zIndex","flex","marginLeft","marginTop","fontSize","borderRadius","textAlign","map","obj","index","postId","padding","lineHeight","color","borderBottom","marginRight","userAvatar","fontWeight","username","marginBottom","content","item","onChange","fs"],"mappings":"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","sourcesContent":["/* eslint no-dupe-keys: 0 */\nimport { ListView, NavBar, Button, Flex, Toast, Slider, Icon, ImagePicker, InputItem } from 'antd-mobile';\nimport React from 'react'\n\n\nimport * as ROUTES from \"../../../constants/routes\";\nimport add from \"../../icons/add.png\";\nimport { get_all_post, get_all_post_by_uid } from \"../../Firebase/getPosts\";\nimport { get_location } from \"../../utils/getLocation\";\nimport { withAuthentication } from \"../../Session\";\nimport ImageContainer from \"../../ImageContainer\";\nimport NavBar1 from \"../NavBar1\";\n// let data = [\n//     {\n//         img: 'https://zos.alipayobjects.com/rmsportal/dKbkpPXKfvZzWCM.png',\n//         title: 'Meet hotel',\n//         des: '不是所有的兼职汪都需要风吹日晒',\n//         time: '11/12/2019',\n//         likes:5,\n//         id:1,\n//         comments:[],\n//         location:''\n//     },\n//     {\n//         img: 'https://zos.alipayobjects.com/rmsportal/XmwCzSeJiqpkuMB.png',\n//         title: 'McDonald\\'s invites you',\n//         des: '不是所有的兼职汪都需要风吹日晒',\n//         time: '11/12/2019',\n//         likes:5,\n//         id:2,\n//         comments:[],\n//         location:'New Zealand'\n//     },\n//     {\n//         img: 'https://zos.alipayobjects.com/rmsportal/hfVtzEhPzTUewPm.png',\n//         title: 'Eat the week',\n//         des: '不是所有的兼职汪都需要风吹日晒',\n//         time: '11/12/2019',\n//         likes:5,\n//         id:3,\n//         comments:[],\n//         location:''\n//     },\n// ];\n\nlet pageIndex = 0;\n\n\n\n\nclass PostPage extends React.Component {\n\n\n    constructor(props) {\n        super(props);\n        const getSectionData = (dataBlob, sectionID) => dataBlob[sectionID];\n        const getRowData = (dataBlob, sectionID, rowID) => dataBlob[rowID];\n\n        const dataSource = new ListView.DataSource({\n            getRowData,\n            getSectionHeaderData: getSectionData,\n            rowHasChanged: (row1, row2) => row1 !== row2,\n            sectionHeaderHasChanged: (s1, s2) => s1 !== s2,\n        });\n\n        this.state = {\n            dataSource,\n            isLoading: true,\n            height: document.documentElement.clientHeight ,\n            distance:1000,\n            currentImg:'',\n            isImgClick:false,\n            hasMore:false,\n            data:[{\n        pictures_url: [],\n        title: 'Eat the week',\n        des: '不是所有的兼职汪都需要风吹日晒',\n        time: '11/12/2019',\n        likes:5,\n        id:3,\n        comments:[],\n        location:'ha'\n    }]\n        };\n    }\n\n    componentDidMount() {\n\n        const callback = (list)=>{\n           this.setState({\n               data:list\n           })\n            // setTimeout(() => {\n            //     this.rData = this.genData();\n            //     this.setState({\n            //         dataSource: this.state.dataSource.cloneWithRows(this.rData),\n            //         isLoading: false,\n            //     });\n            // }, 1000);\n        }\n        //console.log(a)\n        \n        get_all_post(this.props.firebase,callback);\n       // console.log(this.props.firebase.db.collection(\"posts\").get())\n        // you can scroll to the specified position\n        // setTimeout(() => this.lv.scrollTo(0, 120), 800);\n\n        // simulate initial Ajax\n\n    }\n\n\n\nonClickComment =(id)=>{\n\n    this.props.history.push(`/home/comments/${id}`)\n}\n\nclickImg = (file)=>{\n\nthis.setState({\n    isImgClick:true,\n    currentImg:file.url\n})\n}\npicClose=()=>{\n        console.log(\"picCLose\")\n        this.setState({\n            isImgClick:false\n        })\n}\n\nslider =(e)=>{\n        console.log(e)\n      this.setState({\n          distance:e\n      })\n}\nlikes = ()=>{\n    get_location()\n}\n    render() {\n        if(this.state.isLoading){\n            Toast.loading('Loading...', 0.5, () => {\n                console.log('Load complete !!!');\n            });\n        }\n\n\n\n        return (\n            <div >\n                {this.state.isImgClick&&<ImageContainer currentImg={this.state.currentImg} picClose={this.picClose}/>}\n               <NavBar1 history={this.props.history}/>\n\n                <Flex style={{ background: \"white\",height:\"8vh\",position:'fixed',width:\"100%\", top:\"3vh\",zIndex:1}}>\n                    <Flex.Item style={{flex:'8'}}> <Slider\n                        style={{marginLeft:\"20px\",marginTop:'3vh'}}\n                    defaultValue={this.state.distance}\n                    min={0}\n                    max={50000}\n                    step={100}\n                    value={this.state.distance}\n                    onChange={(e)=>this.slider(e)}\n\n                />\n\n                </Flex.Item>\n                    <Flex.Item style={{flex:'2', marginTop:'3vh' ,fontSize:\"20px\"} }>\n                        <InputItem\n                            type=\"number\"\n                            onChange={(e)=>{this.setState({distance:e})}}\n                            value={this.state.distance}\n                            extra=\"m\"\n                        ></InputItem>\n                    </Flex.Item>\n                    <Flex.Item style={{flex:'1'}}>\n                       <Icon size='small' style={{borderRadius:'100%',background:\"lightgrey\",marginTop:'3vh', textAlign:'center',width:'30px' ,fontSize:\"4vh\"} }type={'check'} />\n                    </Flex.Item>\n                </Flex>\n                {this.state.data.map((obj,index)=>{\n                    return(\n                        <div key={obj.postId} style={{ padding: '0 15px' }}>\n                        {index==0?  <div style={{height:'10vh' ,background:'white'}}></div>:<div/> /*show the 1st post completely*/}\n                        <div\n                            style={{\n                                lineHeight: '40px',\n                                color: '#888',\n                                fontSize: 15,\n                                borderBottom: '1px solid #F6F6F6',\n                            }}\n                        >{obj.location}</div>\n                        <div>\n                            <Flex style={{  padding: '15px 0' }}>\n                                <img style={{ height: '64px', marginRight: '15px' }} src={obj.userAvatar} alt=\"\" />\n                                <div style={{ lineHeight: 1 }}>\n\n                                    <div><span style={{  fontSize: '20px',color: '#4e77a1',fontWeight: 'bold' }}>{obj.username}</span></div>\n                                    <div style={{ color: '#5396a5',fontSize: '18px',marginBottom: '8px',marginTop: '5px'  }}>{obj.time}</div>\n                                </div>\n                            </Flex>\n                            <Flex>\n                                <div style={{ marginBottom: '8px', fontWeight: 'bold' }}>{obj.content}</div>\n                            </Flex>\n                            <div>\n                                <ImagePicker\n                                    files={obj.pictures_url.map((item)=>{\n                                        return {url:item}\n                                    })}\n\n                                    onChange={this.onChange}\n                                    onImageClick={(index, fs) => {\n                                        this.clickImg(fs[index]);\n                                    }}\n                                    selectable={false}\n                                    disableDelete={true}\n                                    length={3}\n\n                                />\n\n                            </div>\n                        </div>\n\n                        <Flex>\n                            <Flex.Item><Button size='small' style={{background:'#5396a5' ,color:\"#ecfcee\",fontWeight: 'bold'}} onClick={()=> this.onClickComment(obj.postId)}>Comment</Button></Flex.Item>\n                            <Flex.Item><Button size='small' style={{background:'#5396a5',color:\"#ecfcee\",fontWeight: 'bold'}} onClick={this.likes}>Likes {!!!obj.likes?'('+obj.likes+')':\"\"}</Button></Flex.Item>\n                        </Flex>\n                    </div>)\n                })}\n\n            </div>\n        );\n    }\n}\n\nexport default withAuthentication(PostPage);\n\n"]},"metadata":{},"sourceType":"module"}