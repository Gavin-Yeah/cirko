{"ast":null,"code":"import\"antd-mobile/lib/button/style\";import _Button from\"antd-mobile/lib/button\";import\"antd-mobile/lib/image-picker/style\";import _ImagePicker from\"antd-mobile/lib/image-picker\";import\"antd-mobile/lib/flex/style\";import _Flex from\"antd-mobile/lib/flex\";import\"antd-mobile/lib/nav-bar/style\";import _NavBar from\"antd-mobile/lib/nav-bar\";import\"antd-mobile/lib/toast/style\";import _Toast from\"antd-mobile/lib/toast\";import\"antd-mobile/lib/list-view/style\";import _ListView from\"antd-mobile/lib/list-view\";import _classCallCheck from\"/Users/jiadaye/workspace/cirko/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/jiadaye/workspace/cirko/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/jiadaye/workspace/cirko/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/jiadaye/workspace/cirko/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/jiadaye/workspace/cirko/node_modules/@babel/runtime/helpers/esm/inherits\";import React from'react';import*as ROUTES from\"../../../../constants/routes\";import add from'../../../icons/add.png';import ImageContainer from\"../../../ImageContainer\";import{get_location}from\"../../../utils/getLocation\";import{get_all_liked_posts,get_all_post}from\"../../../Firebase/getPosts\";import withAuthentication from\"../../../Session/withAuthentication\";import{likes}from\"../../../Firebase/upload\";import Item from\"../../Item\";var data=[{img:'https://zos.alipayobjects.com/rmsportal/dKbkpPXKfvZzWCM.png',title:'Meet hotel',des:'不是所有的兼职汪都需要风吹日晒',id:1},{img:'https://zos.alipayobjects.com/rmsportal/XmwCzSeJiqpkuMB.png',title:'McDonald\\'s invites you',des:'不是所有的兼职汪都需要风吹日晒',id:2},{img:'https://zos.alipayobjects.com/rmsportal/hfVtzEhPzTUewPm.png',title:'Eat the week',des:'不是所有的兼职汪都需要风吹日晒',id:3}];var NUM_SECTIONS=5;var NUM_ROWS_PER_SECTION=5;var pageIndex=0;var NUM_ROWS=20;var dataBlobs={};var sectionIDs=[];var rowIDs=[];function genData(){var pIndex=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var dataBlob={};for(var i=0;i<NUM_ROWS;i++){var ii=pIndex*NUM_ROWS+i;dataBlob[\"\".concat(ii)]=\"row - \".concat(ii);}return dataBlob;}var FavPosts=/*#__PURE__*/function(_React$Component){_inherits(FavPosts,_React$Component);function FavPosts(props){var _this;_classCallCheck(this,FavPosts);_this=_possibleConstructorReturn(this,_getPrototypeOf(FavPosts).call(this,props));_this.onClickComment=function(id){_this.props.history.push(\"/home/comments/\".concat(id));};_this.clickImg=function(file){_this.setState({isImgClick:true,currentImg:file.url});};_this.picClose=function(){console.log(\"picCLose\");_this.setState({isImgClick:false});};_this.likes=function(postId){likes(_this.props.firebase,_this.props.firebase.auth.currentUser.uid,postId).then(function(result){console.log(result,postId);_this.renderItems();}).catch(function(err){console.log(err.toString());});};_this.renderItems=function(){_this.setState({isLoading:true});var list=get_all_liked_posts(_this.props.firebase,_this.props.firebase.auth.currentUser.uid);list.then(function(e){_this.setState({data:e});});};_this.onClickComment=function(id){_this.props.history.push(\"/home/comments/\".concat(id));};var getSectionData=function getSectionData(dataBlob,sectionID){return dataBlob[sectionID];};var getRowData=function getRowData(dataBlob,sectionID,rowID){return dataBlob[rowID];};var dataSource=new _ListView.DataSource({getRowData:getRowData,getSectionHeaderData:getSectionData,rowHasChanged:function rowHasChanged(row1,row2){return row1!==row2;},sectionHeaderHasChanged:function sectionHeaderHasChanged(s1,s2){return s1!==s2;}});_this.state={dataSource:dataSource,isLoading:true,height:document.documentElement.clientHeight,currentImg:'',isImgClick:false,data:[]};return _this;}_createClass(FavPosts,[{key:\"componentDidMount\",value:function componentDidMount(){this.renderItems();}},{key:\"render\",value:function render(){var _this2=this;if(this.state.isLoading){_Toast.loading('Loading...',0.5,function(){console.log('Load complete !!!');});}return React.createElement(\"div\",null,React.createElement(_NavBar,{style:{backgroundColor:'#a6daba',borderBottomLeftRadius:'100%',borderBottomRightRadius:'100%',height:\"7vh\",position:'fixed',width:\"100%\",top:0,zIndex:1},mode:\"light\",rightContent:React.createElement(\"div\",{onClick:function onClick(){return _this2.props.history.push(ROUTES.CREATEPOST);},style:{width:'40px',marginTop:\"-10px\"}},React.createElement(\"img\",{src:add,style:{width:\"40px\"},alt:\"add\"})),leftContent:React.createElement(\"div\",{onClick:function onClick(){return _this2.props.history.goBack();},style:{width:'40px',marginTop:\"-20px\",marginLeft:'5px',color:'White',fontSize:'40px',fontWeight:'bold'}},\" <\")},React.createElement(\"h1\",{style:{color:\"white\"}},\"Favorite\")),this.state.isImgClick&&React.createElement(ImageContainer,{currentImg:this.state.currentImg,picClose:this.picClose}),React.createElement(\"div\",null,this.state.data.map(function(obj,index){return React.createElement(\"div\",{key:index,style:{padding:'0 15px',marginBottom:'10px',background:'white'}},index==0?React.createElement(\"div\",{style:{height:'11vh'}}):React.createElement(\"div\",null)/*show the 1st post completely*/,React.createElement(\"div\",{style:{lineHeight:'40px',color:'#888',fontSize:15,borderBottom:'1px solid #F6F6F6',background:'#ededed'}},obj.place?React.createElement(\"img\",{style:{width:\"5vw\"},src:\"https://image.flaticon.com/icons/png/128/149/149060.png\",alt:\"\"}):\"\",obj.place),React.createElement(\"div\",null,React.createElement(_Flex,{style:{padding:'15px 0'}},React.createElement(\"img\",{style:{height:'64px',marginRight:'15px'},src:obj.userAvatar,alt:\"\"}),React.createElement(\"div\",{style:{lineHeight:1}},React.createElement(\"div\",null,React.createElement(\"span\",{style:{fontSize:'20px',color:'#4e77a1',fontWeight:'bold'}},obj.username)),React.createElement(\"div\",{style:{color:'#5396a5',fontSize:'18px',marginBottom:'8px',marginTop:'5px'}},obj.time))),React.createElement(_Flex,null,React.createElement(\"div\",{style:{marginBottom:'8px',fontWeight:'bold'}},obj.content)),React.createElement(\"div\",null,React.createElement(_ImagePicker,{files:obj.pictures_url.map(function(item){return{url:item};}),onChange:_this2.onChange,onImageClick:function onImageClick(index,fs){_this2.clickImg(fs[index]);},selectable:false,disableDelete:true,length:3}))),React.createElement(_Flex,null,React.createElement(_Flex.Item,null,React.createElement(_Button,{size:\"small\",activeStyle:{background:'#7fc4a7'},style:{background:'#a6daba',color:\"#ecfcee\",fontWeight:'bold'},onClick:function onClick(){return _this2.onClickComment(obj.postId);}},\"Comment(\",obj.comments.length,\")\")),React.createElement(_Flex.Item,null,React.createElement(_Button,{size:\"small\",activeStyle:{background:'#7fc4a7'},style:{background:'#a6daba',color:\"#ecfcee\",fontWeight:'bold'},onClick:function onClick(){return _this2.likes(obj.postId);}},\"Likes \",obj.likes!==0?'('+obj.likes.length+')':\"\"))));})));}}]);return FavPosts;}(React.Component);export default withAuthentication(FavPosts);","map":{"version":3,"sources":["/Users/jiadaye/workspace/cirko/src/components/Home/Account/FavPosts/index.js"],"names":["React","ROUTES","add","ImageContainer","get_location","get_all_liked_posts","get_all_post","withAuthentication","likes","Item","data","img","title","des","id","NUM_SECTIONS","NUM_ROWS_PER_SECTION","pageIndex","NUM_ROWS","dataBlobs","sectionIDs","rowIDs","genData","pIndex","dataBlob","i","ii","FavPosts","props","onClickComment","history","push","clickImg","file","setState","isImgClick","currentImg","url","picClose","console","log","postId","firebase","auth","currentUser","uid","then","result","renderItems","catch","err","toString","isLoading","list","e","getSectionData","sectionID","getRowData","rowID","dataSource","DataSource","getSectionHeaderData","rowHasChanged","row1","row2","sectionHeaderHasChanged","s1","s2","state","height","document","documentElement","clientHeight","loading","backgroundColor","borderBottomLeftRadius","borderBottomRightRadius","position","width","top","zIndex","CREATEPOST","marginTop","goBack","marginLeft","color","fontSize","fontWeight","map","obj","index","padding","marginBottom","background","lineHeight","borderBottom","place","marginRight","userAvatar","username","time","content","pictures_url","item","onChange","fs","comments","length","Component"],"mappings":"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","sourcesContent":["/* eslint no-dupe-keys: 0 */\nimport { ListView, NavBar, Button, Flex, Icon, Toast, ImagePicker } from 'antd-mobile';\nimport React from 'react'\n\n\nimport * as ROUTES from \"../../../../constants/routes\";\n\nimport add from '../../../icons/add.png'\nimport ImageContainer from \"../../../ImageContainer\";\nimport { get_location } from \"../../../utils/getLocation\";\nimport { get_all_liked_posts, get_all_post } from \"../../../Firebase/getPosts\";\nimport withAuthentication from \"../../../Session/withAuthentication\";\nimport { likes } from \"../../../Firebase/upload\";\nimport Item from \"../../Item\";\nconst data = [\n    {\n        img: 'https://zos.alipayobjects.com/rmsportal/dKbkpPXKfvZzWCM.png',\n        title: 'Meet hotel',\n        des: '不是所有的兼职汪都需要风吹日晒',\n        id:1,\n    },\n    {\n        img: 'https://zos.alipayobjects.com/rmsportal/XmwCzSeJiqpkuMB.png',\n        title: 'McDonald\\'s invites you',\n        des: '不是所有的兼职汪都需要风吹日晒',\n        id:2,\n    },\n    {\n        img: 'https://zos.alipayobjects.com/rmsportal/hfVtzEhPzTUewPm.png',\n        title: 'Eat the week',\n        des: '不是所有的兼职汪都需要风吹日晒',\n        id:3,\n    },\n];\nconst NUM_SECTIONS = 5;\nconst NUM_ROWS_PER_SECTION = 5;\nlet pageIndex = 0;\nconst NUM_ROWS = 20;\nconst dataBlobs = {};\nlet sectionIDs = [];\nlet rowIDs = [];\nfunction genData(pIndex = 0) {\n    const dataBlob = {};\n    for (let i = 0; i < NUM_ROWS; i++) {\n        const ii = (pIndex * NUM_ROWS) + i;\n        dataBlob[`${ii}`] = `row - ${ii}`;\n    }\n    return dataBlob;\n}\n\nclass FavPosts extends React.Component {\n    constructor(props) {\n        super(props);\n        const getSectionData = (dataBlob, sectionID) => dataBlob[sectionID];\n        const getRowData = (dataBlob, sectionID, rowID) => dataBlob[rowID];\n\n        const dataSource = new ListView.DataSource({\n            getRowData,\n            getSectionHeaderData: getSectionData,\n            rowHasChanged: (row1, row2) => row1 !== row2,\n            sectionHeaderHasChanged: (s1, s2) => s1 !== s2,\n        });\n\n        this.state = {\n            dataSource,\n            isLoading: true,\n            height: document.documentElement.clientHeight ,\n            currentImg:'',\n            isImgClick:false,\n            data:[]\n        };\n    }\n\n\n\n\n    onClickComment =(id)=>{\n\n        this.props.history.push(`/home/comments/${id}`)\n    }\n\n    clickImg = (file)=>{\n\n        this.setState({\n            isImgClick:true,\n            currentImg:file.url\n        })\n    }\n    picClose=()=>{\n        console.log(\"picCLose\")\n        this.setState({\n            isImgClick:false\n        })\n    }\n\n    likes = (postId)=>{\n\n        likes(this.props.firebase,this.props.firebase.auth.currentUser.uid,postId).then((result)=>{\n            console.log(result,postId);\n            this.renderItems()\n\n        }).catch(err=>{\n            console.log(err.toString())\n        });\n\n    }\n\n    componentDidMount() {\n      this.renderItems();\n\n    }\n\n    renderItems = ()=>{\n        this.setState({\n            isLoading:true\n        })\n\n\n    let list =  get_all_liked_posts(this.props.firebase,this.props.firebase.auth.currentUser.uid);\n        list.then((e)=>{\n            this.setState({\n                data:e\n            })\n        })\n    }\n\n\n    onClickComment =(id)=>{\n\n        this.props.history.push(`/home/comments/${id}`)\n    }\n\n\n    render() {\n        if(this.state.isLoading){\n            Toast.loading('Loading...', 0.5, () => {\n                console.log('Load complete !!!');\n            });\n        }\n\n\n\n        return (\n            <div >\n                <NavBar\n                    style={{backgroundColor: '#a6daba', borderBottomLeftRadius:'100%', borderBottomRightRadius:'100%',  height:\"7vh\",position:'fixed',width:\"100%\", top:0,zIndex:1}}\n                    mode=\"light\"\n\n                    rightContent={\n                        <div onClick={()=>this.props.history.push(ROUTES.CREATEPOST)} style={{width: '40px',marginTop:\"-10px\",}}>\n                            <img src={add} style={{width:\"40px\"}} alt=\"add\"/>\n                        </div>\n\n                    }\n\n                    leftContent={\n                        <div onClick={()=>  this.props.history.goBack()}  style={{width: '40px',marginTop:\"-20px\", marginLeft:'5px', color:'White', fontSize:'40px',fontWeight: 'bold'}}> &lt;\n                        </div>\n                    }\n\n                ><h1 style={{color:\"white\",}}>Favorite</h1>\n                </NavBar>\n                {this.state.isImgClick&&<ImageContainer currentImg={this.state.currentImg} picClose={this.picClose}/>}\n                <div >\n                    {\n                        this.state.data.map((obj,index)=>{\n                            return(\n                                <div key={index} style={{ padding: '0 15px', marginBottom:'10px', background:'white' }}>\n                                    {index==0?  <div style={{height:'11vh'}}></div>:<div/> /*show the 1st post completely*/}\n                                    <div\n                                        style={{\n                                            lineHeight: '40px',\n                                            color: '#888',\n                                            fontSize: 15,\n                                            borderBottom: '1px solid #F6F6F6',\n                                            background:'#ededed',\n\n\n                                        }}\n                                    >{obj.place?<img style={{width:\"5vw\"}} src=\"https://image.flaticon.com/icons/png/128/149/149060.png\" alt=\"\"/>:\"\"}{obj.place}</div>\n\n                                    <div>\n                                        <Flex style={{  padding: '15px 0' }}>\n                                            <img style={{ height: '64px', marginRight: '15px' }} src={obj.userAvatar} alt=\"\" />\n                                            <div style={{ lineHeight: 1 }}>\n\n                                                <div><span style={{  fontSize: '20px',color: '#4e77a1',fontWeight: 'bold' }}>{obj.username}</span></div>\n                                                <div style={{ color: '#5396a5',fontSize: '18px',marginBottom: '8px',marginTop: '5px'  }}>{obj.time}</div>\n                                            </div>\n                                        </Flex>\n                                        <Flex>\n                                            <div style={{ marginBottom: '8px', fontWeight: 'bold' }}>{obj.content}</div>\n                                        </Flex>\n                                        <div>\n                                            <ImagePicker\n                                                files={obj.pictures_url.map((item)=>{\n                                                    return {url:item}\n                                                })}\n\n                                                onChange={this.onChange}\n                                                onImageClick={(index, fs) => {\n                                                    this.clickImg(fs[index]);\n                                                }}\n                                                selectable={false}\n                                                disableDelete={true}\n                                                length={3}\n\n\n                                            />\n\n                                        </div>\n                                    </div>\n\n                                    <Flex>\n                                        <Flex.Item><Button size='small' activeStyle={{background:'#7fc4a7'}} style={{background:'#a6daba' ,color:\"#ecfcee\",fontWeight: 'bold'}} onClick={()=> this.onClickComment(obj.postId)}>Comment({obj.comments.length})</Button></Flex.Item>\n                                        <Flex.Item><Button size='small' activeStyle={{background:'#7fc4a7'}} style={{background:'#a6daba',color:\"#ecfcee\",fontWeight: 'bold'}} onClick={()=>this.likes(obj.postId)}>Likes {obj.likes!==0?'('+obj.likes.length+')':\"\"}</Button></Flex.Item>\n                                    </Flex>\n                                </div>\n                            )\n                        })\n                    }\n\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default withAuthentication(FavPosts);\n\n"]},"metadata":{},"sourceType":"module"}