{"ast":null,"code":"import\"antd-mobile/lib/button/style\";import _Button from\"antd-mobile/lib/button\";import\"antd-mobile/lib/image-picker/style\";import _ImagePicker from\"antd-mobile/lib/image-picker\";import\"antd-mobile/lib/flex/style\";import _Flex from\"antd-mobile/lib/flex\";import _classCallCheck from\"/Users/jiadaye/workspace/cirko/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/jiadaye/workspace/cirko/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/jiadaye/workspace/cirko/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/jiadaye/workspace/cirko/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/jiadaye/workspace/cirko/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import{likes}from\"../../Firebase/upload\";import withAuthentication from\"../../Session/withAuthentication\";var Item=/*#__PURE__*/function(_Component){_inherits(Item,_Component);function Item(){var _getPrototypeOf2;var _this;_classCallCheck(this,Item);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(Item)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.onClickComment=function(id){_this.props.history.push(\"/home/comments/\".concat(id));};_this.clickImg=function(file){_this.setState({isImgClick:true,currentImg:file.url});};_this.picClose=function(){console.log(\"picCLose\");_this.setState({isImgClick:false});};_this.likes=function(postId){likes(_this.props.firebase,_this.props.firebase.auth.currentUser.uid,postId).then(function(result){console.log(result,postId);_this.props.renderItems();}).catch(function(err){console.log(err.toString());});};return _this;}_createClass(Item,[{key:\"render\",value:function render(){var _this2=this;var _this$props=this.props,obj=_this$props.obj,index=_this$props.index;return React.createElement(\"div\",{style:{padding:'0 15px',marginBottom:'10px',background:'white'}},index==0?React.createElement(\"div\",{style:{height:'11vh'}}):React.createElement(\"div\",null)/*show the 1st post completely*/,React.createElement(\"div\",{style:{lineHeight:'40px',color:'#888',fontSize:15,borderBottom:'1px solid #F6F6F6',background:'#ededed'}},obj.place?React.createElement(\"img\",{style:{width:\"2vw\"},src:\"https://image.flaticon.com/icons/png/128/149/149060.png\",alt:\"\"}):\"\",obj.place),React.createElement(\"div\",null,React.createElement(_Flex,{style:{padding:'15px 0'}},React.createElement(\"img\",{style:{height:'64px',marginRight:'15px'},src:obj.userAvatar,alt:\"\"}),React.createElement(\"div\",{style:{lineHeight:1}},React.createElement(\"div\",null,React.createElement(\"span\",{style:{fontSize:'20px',color:'#4e77a1',fontWeight:'bold'}},obj.username)),React.createElement(\"div\",{style:{color:'#5396a5',fontSize:'18px',marginBottom:'8px',marginTop:'5px'}},obj.time))),React.createElement(_Flex,null,React.createElement(\"div\",{style:{marginBottom:'8px',fontWeight:'bold'}},obj.content)),React.createElement(\"div\",null,React.createElement(_ImagePicker,{files:obj.pictures_url.map(function(item){return{url:item};}),onChange:this.onChange,onImageClick:function onImageClick(index,fs){_this2.clickImg(fs[index]);},selectable:false,disableDelete:true,length:3}))),React.createElement(_Flex,null,React.createElement(_Flex.Item,null,React.createElement(_Button,{size:\"small\",activeStyle:{background:'#4e77a1'},style:{background:'#5396a5',color:\"#ecfcee\",fontWeight:'bold'},onClick:function onClick(){return _this2.onClickComment(obj.postId);}},\"Comment(\",obj.comments.length,\")\")),React.createElement(_Flex.Item,null,React.createElement(_Button,{size:\"small\",activeStyle:{background:'#4e77a1'},style:{background:'#5396a5',color:\"#ecfcee\",fontWeight:'bold'},onClick:function onClick(){return _this2.likes(obj.postId);}},\"Likes \",obj.likes!==0?'('+obj.likes.length+')':\"\"))));}}]);return Item;}(Component);export default withAuthentication(Item);","map":{"version":3,"sources":["/Users/jiadaye/workspace/cirko/src/components/Home/Item/index.js"],"names":["React","Component","likes","withAuthentication","Item","onClickComment","id","props","history","push","clickImg","file","setState","isImgClick","currentImg","url","picClose","console","log","postId","firebase","auth","currentUser","uid","then","result","renderItems","catch","err","toString","obj","index","padding","marginBottom","background","height","lineHeight","color","fontSize","borderBottom","place","width","marginRight","userAvatar","fontWeight","username","marginTop","time","content","pictures_url","map","item","onChange","fs","comments","length"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Flex, Button, ImagePicker } from \"antd-mobile\";\nimport { likes } from \"../../Firebase/upload\";\nimport withAuthentication from \"../../Session/withAuthentication\";\nclass Item extends Component {\n    onClickComment = (id) => {\n\n        this.props.history.push(`/home/comments/${id}`)\n    }\n\n    clickImg = (file) => {\n\n        this.setState({\n            isImgClick: true,\n            currentImg: file.url\n        })\n    }\n    picClose = () => {\n        console.log(\"picCLose\")\n        this.setState({\n            isImgClick: false\n        })\n    }\n\n    likes = (postId) => {\n\n        likes(this.props.firebase, this.props.firebase.auth.currentUser.uid, postId).then((result) => {\n            console.log(result, postId);\n            this.props.renderItems()\n\n        }).catch(err => {\n            console.log(err.toString())\n        });\n\n    }\n    render() {\n       const {obj, index } = this.props;\n        return (\n            <div  style={{padding: '0 15px', marginBottom: '10px', background: 'white'}}>\n                {index == 0 ? <div style={{height: '11vh'}}></div> :\n                    <div/> /*show the 1st post completely*/}\n                <div\n                    style={{\n                        lineHeight: '40px',\n                        color: '#888',\n                        fontSize: 15,\n                        borderBottom: '1px solid #F6F6F6',\n                        background: '#ededed',\n\n\n                    }}\n                >{obj.place ? <img style={{width: \"2vw\"}}\n                                   src=\"https://image.flaticon.com/icons/png/128/149/149060.png\"\n                                   alt=\"\"/> : \"\"}{obj.place}</div>\n\n                <div>\n                    <Flex style={{padding: '15px 0'}}>\n                        <img style={{height: '64px', marginRight: '15px'}} src={obj.userAvatar}\n                             alt=\"\"/>\n                        <div style={{lineHeight: 1}}>\n\n                            <div><span style={{\n                                fontSize: '20px',\n                                color: '#4e77a1',\n                                fontWeight: 'bold'\n                            }}>{obj.username}</span></div>\n                            <div style={{\n                                color: '#5396a5',\n                                fontSize: '18px',\n                                marginBottom: '8px',\n                                marginTop: '5px'\n                            }}>{obj.time}</div>\n                        </div>\n                    </Flex>\n                    <Flex>\n                        <div style={{marginBottom: '8px', fontWeight: 'bold'}}>{obj.content}</div>\n                    </Flex>\n                    <div>\n                        <ImagePicker\n                            files={obj.pictures_url.map((item) => {\n                                return {url: item}\n                            })}\n\n                            onChange={this.onChange}\n                            onImageClick={(index, fs) => {\n                                this.clickImg(fs[index]);\n                            }}\n                            selectable={false}\n                            disableDelete={true}\n                            length={3}\n\n\n                        />\n\n                    </div>\n                </div>\n\n                <Flex>\n                    <Flex.Item><Button size='small' activeStyle={{background: '#4e77a1'}} style={{\n                        background: '#5396a5',\n                        color: \"#ecfcee\",\n                        fontWeight: 'bold'\n                    }}\n                                       onClick={() => this.onClickComment(obj.postId)}>Comment({obj.comments.length})</Button></Flex.Item>\n                    <Flex.Item><Button size='small' activeStyle={{background: '#4e77a1'}} style={{\n                        background: '#5396a5',\n                        color: \"#ecfcee\",\n                        fontWeight: 'bold'\n                    }}\n                                       onClick={() => this.likes(obj.postId)}>Likes {obj.likes !== 0 ? '(' + obj.likes.length + ')' : \"\"}</Button></Flex.Item>\n                </Flex>\n            </div>\n        );\n    }\n}\n\nexport default withAuthentication(Item);"]},"metadata":{},"sourceType":"module"}