{"ast":null,"code":"import\"antd-mobile/lib/button/style\";import _Button from\"antd-mobile/lib/button\";import\"antd-mobile/lib/image-picker/style\";import _ImagePicker from\"antd-mobile/lib/image-picker\";import\"antd-mobile/lib/nav-bar/style\";import _NavBar from\"antd-mobile/lib/nav-bar\";import\"antd-mobile/lib/icon/style\";import _Icon from\"antd-mobile/lib/icon\";import _classCallCheck from\"/Users/jiadaye/workspace/cirko/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/jiadaye/workspace/cirko/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/jiadaye/workspace/cirko/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/jiadaye/workspace/cirko/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/jiadaye/workspace/cirko/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import{updateImage}from'../../../Firebase/upload';import{withAuthentication}from\"../../../Session\";var data=[{url:'https://zos.alipayobjects.com/rmsportal/PZUUCKTRIHWiZSY.jpeg'}];var EditAvatar=/*#__PURE__*/function(_Component){_inherits(EditAvatar,_Component);function EditAvatar(){var _getPrototypeOf2;var _this;_classCallCheck(this,EditAvatar);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(EditAvatar)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={files:data,multiple:false};_this.onChange=function(files,type,index){console.log(files,type,index);_this.setState({files:files});};_this.onClick=function(){var files=_this.state.files;// this.props.firebase.auth.currentUser.updateProfile({\n//     photoURL:files[0]\n// })\nupdateImage(_this.props.firebase,_this.props.firebase.auth.currentUser.uid,files[0].file).then(function(data){console.log(data);_this.props.history.goBack();});};return _this;}_createClass(EditAvatar,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;var imageUrl=this.props.firebase.auth.currentUser.photoURL;console.log(imageUrl);this.setState({files:[{url:imageUrl}]},function(){console.log(_this2.state);});}},{key:\"render\",value:function render(){var _this3=this;return React.createElement(\"div\",null,React.createElement(_NavBar,{mode:\"light\",icon:React.createElement(_Icon,{type:\"left\"}),onLeftClick:function onLeftClick(){_this3.props.history.goBack();}},\"Update Avatar\"),React.createElement(_ImagePicker,{files:this.state.files,onChange:this.onChange,onImageClick:function onImageClick(index,fs){return console.log(index,fs);},selectable:this.state.files.length<1,multiple:this.state.multiple}),React.createElement(_Button,{type:\"primary\",onClick:this.onClick},\"Confirm\"));}}]);return EditAvatar;}(Component);export default withAuthentication(EditAvatar);","map":{"version":3,"sources":["/Users/jiadaye/workspace/cirko/src/components/Home/Account/EditAvatar/index.js"],"names":["React","Component","updateImage","withAuthentication","data","url","EditAvatar","state","files","multiple","onChange","type","index","console","log","setState","onClick","props","firebase","auth","currentUser","uid","file","then","history","goBack","imageUrl","photoURL","fs","length"],"mappings":"o5BAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CAEA,OAASC,WAAT,KAA4B,0BAA5B,CACA,OAASC,kBAAT,KAAmC,kBAAnC,CAGA,GAAMC,CAAAA,IAAI,CAAG,CAAC,CACVC,GAAG,CAAE,8DADK,CAAD,CAAb,C,GAGMC,CAAAA,U,+YACFC,K,CAAQ,CACJC,KAAK,CAAEJ,IADH,CAEJK,QAAQ,CAAE,KAFN,C,OAIRC,Q,CAAW,SAACF,KAAD,CAAQG,IAAR,CAAcC,KAAd,CAAwB,CAC/BC,OAAO,CAACC,GAAR,CAAYN,KAAZ,CAAmBG,IAAnB,CAAyBC,KAAzB,EACA,MAAKG,QAAL,CAAc,CACVP,KAAK,CAALA,KADU,CAAd,EAGH,C,OACDQ,O,CAAQ,UAAI,IACHR,CAAAA,KADG,CACM,MAAKD,KADX,CACHC,KADG,CAER;AACA;AACA;AACAN,WAAW,CAAC,MAAKe,KAAL,CAAWC,QAAZ,CAAqB,MAAKD,KAAL,CAAWC,QAAX,CAAoBC,IAApB,CAAyBC,WAAzB,CAAqCC,GAA1D,CAA8Db,KAAK,CAAC,CAAD,CAAL,CAASc,IAAvE,CAAX,CAAwFC,IAAxF,CAA6F,SAACnB,IAAD,CAAQ,CACjGS,OAAO,CAACC,GAAR,CAAYV,IAAZ,EACD,MAAKa,KAAL,CAAWO,OAAX,CAAmBC,MAAnB,GACF,CAHD,EAOH,C,mGACmB,iBAChB,GAAMC,CAAAA,QAAQ,CAAG,KAAKT,KAAL,CAAWC,QAAX,CAAoBC,IAApB,CAAyBC,WAAzB,CAAqCO,QAAtD,CACAd,OAAO,CAACC,GAAR,CAAYY,QAAZ,EACA,KAAKX,QAAL,CAAc,CACVP,KAAK,CAAC,CACF,CAACH,GAAG,CAACqB,QAAL,CADE,CADI,CAAd,CAIE,UAAI,CACFb,OAAO,CAACC,GAAR,CAAY,MAAI,CAACP,KAAjB,EACH,CAND,EAOH,C,uCAEQ,iBAIL,MACI,gCACI,6BACI,IAAI,CAAC,OADT,CAEI,IAAI,CAAE,2BAAM,IAAI,CAAC,MAAX,EAFV,CAGI,WAAW,CAAE,sBAAM,CAAC,MAAI,CAACU,KAAL,CAAWO,OAAX,CAAmBC,MAAnB,GAA4B,CAHpD,kBADJ,CAOI,kCACI,KAAK,CAAE,KAAKlB,KAAL,CAAWC,KADtB,CAEI,QAAQ,CAAE,KAAKE,QAFnB,CAGI,YAAY,CAAE,sBAACE,KAAD,CAAQgB,EAAR,QAAef,CAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ,CAAmBgB,EAAnB,CAAf,EAHlB,CAII,UAAU,CAAE,KAAKrB,KAAL,CAAWC,KAAX,CAAiBqB,MAAjB,CAA0B,CAJ1C,CAKI,QAAQ,CAAE,KAAKtB,KAAL,CAAWE,QALzB,EAPJ,CAcI,6BAAQ,IAAI,CAAE,SAAd,CAAyB,OAAO,CAAE,KAAKO,OAAvC,YAdJ,CADJ,CAkBH,C,wBA1DoBf,S,EA6DzB,cAAeE,CAAAA,kBAAkB,CAACG,UAAD,CAAjC","sourcesContent":["import React, { Component } from 'react';\nimport { Button, Icon, ImagePicker, NavBar } from 'antd-mobile';\nimport { updateImage } from '../../../Firebase/upload'\nimport { withAuthentication } from \"../../../Session\";\n\n\nconst data = [{\n    url: 'https://zos.alipayobjects.com/rmsportal/PZUUCKTRIHWiZSY.jpeg',\n}, ];\nclass EditAvatar extends Component {\n    state = {\n        files: data,\n        multiple: false,\n    }\n    onChange = (files, type, index) => {\n        console.log(files, type, index);\n        this.setState({\n            files,\n        });\n    }\n    onClick=()=>{\n        let {files} = this.state;\n        // this.props.firebase.auth.currentUser.updateProfile({\n        //     photoURL:files[0]\n        // })\n        updateImage(this.props.firebase,this.props.firebase.auth.currentUser.uid,files[0].file).then((data)=>{\n            console.log(data);\n           this.props.history.goBack();\n        });\n\n\n\n    }\n    componentDidMount() {\n        const imageUrl = this.props.firebase.auth.currentUser.photoURL;\n        console.log(imageUrl)\n        this.setState({\n            files:[\n                {url:imageUrl}\n            ]\n        },()=>{\n            console.log(this.state)\n        })\n    }\n\n    render() {\n\n\n\n        return (\n            <div >\n                <NavBar\n                    mode=\"light\"\n                    icon={<Icon type=\"left\" />}\n                    onLeftClick={() => {this.props.history.goBack()}}\n\n                >Update Avatar</NavBar>\n                <ImagePicker\n                    files={this.state.files}\n                    onChange={this.onChange}\n                    onImageClick={(index, fs) => console.log(index, fs)}\n                    selectable={this.state.files.length < 1}\n                    multiple={this.state.multiple}\n                />\n                <Button type={\"primary\"} onClick={this.onClick}>Confirm</Button>\n            </div>\n        );\n    }\n}\n\nexport default withAuthentication(EditAvatar);"]},"metadata":{},"sourceType":"module"}