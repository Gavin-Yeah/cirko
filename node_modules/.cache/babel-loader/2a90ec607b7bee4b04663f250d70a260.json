{"ast":null,"code":"import _classCallCheck from\"/Users/jiadaye/workspace/cirko/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/jiadaye/workspace/cirko/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/jiadaye/workspace/cirko/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/jiadaye/workspace/cirko/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/jiadaye/workspace/cirko/node_modules/@babel/runtime/helpers/esm/inherits\";import React from'react';import AuthUserContext from'./context';import{withFirebase}from'../Firebase';var withAuthentication=function withAuthentication(Component){var WithAuthentication=/*#__PURE__*/function(_React$Component){_inherits(WithAuthentication,_React$Component);function WithAuthentication(props){var _this;_classCallCheck(this,WithAuthentication);_this=_possibleConstructorReturn(this,_getPrototypeOf(WithAuthentication).call(this,props));_this.state={authUser:JSON.parse(localStorage.getItem('authUser'))};return _this;}_createClass(WithAuthentication,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;this.listener=this.props.firebase.onAuthUserListener(function(authUser){//browser's local storage stores the authUser\nlocalStorage.setItem('authUser',JSON.stringify(authUser));_this2.setState({authUser:authUser});},function(){localStorage.removeItem('authUser');_this2.setState({authUser:null});});}},{key:\"render\",value:function render(){return React.createElement(AuthUserContext.Provider,{value:this.state.authUser},React.createElement(Component,this.props));}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){this.listener();}}]);return WithAuthentication;}(React.Component);return withFirebase(WithAuthentication);};export default withAuthentication;","map":{"version":3,"sources":["/Users/jiadaye/workspace/cirko/src/components/Session/withAuthentication.js"],"names":["React","AuthUserContext","withFirebase","withAuthentication","Component","WithAuthentication","props","state","authUser","JSON","parse","localStorage","getItem","listener","firebase","onAuthUserListener","setItem","stringify","setState","removeItem"],"mappings":"mkBAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,eAAP,KAA4B,WAA5B,CACA,OAASC,YAAT,KAA6B,aAA7B,CACA,GAAMC,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,CAAAC,SAAS,CAAI,IAC9BC,CAAAA,kBAD8B,wFAEhC,4BAAYC,KAAZ,CAAmB,oDACf,oFAAMA,KAAN,GACA,MAAKC,KAAL,CAAa,CACTC,QAAQ,CAAEC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,UAArB,CAAX,CADD,CAAb,CAFe,aAKlB,CAP+B,4FASZ,iBAChB,KAAKC,QAAL,CAAgB,KAAKP,KAAL,CAAWQ,QAAX,CAAoBC,kBAApB,CACZ,SAAAP,QAAQ,CAAI,CACR;AACAG,YAAY,CAACK,OAAb,CAAqB,UAArB,CAAiCP,IAAI,CAACQ,SAAL,CAAeT,QAAf,CAAjC,EACA,MAAI,CAACU,QAAL,CAAc,CAAEV,QAAQ,CAARA,QAAF,CAAd,EACH,CALW,CAMZ,UAAM,CACFG,YAAY,CAACQ,UAAb,CAAwB,UAAxB,EACA,MAAI,CAACD,QAAL,CAAc,CAAEV,QAAQ,CAAE,IAAZ,CAAd,EACH,CATW,CAAhB,CAWH,CArB+B,uCAuBvB,CACL,MACI,qBAAC,eAAD,CAAiB,QAAjB,EAA0B,KAAK,CAAE,KAAKD,KAAL,CAAWC,QAA5C,EACI,oBAAC,SAAD,CAAe,KAAKF,KAApB,CADJ,CADJ,CAKH,CA7B+B,mEA+BT,CACnB,KAAKO,QAAL,GACH,CAjC+B,gCACHb,KAAK,CAACI,SADH,EAmCpC,MAAOF,CAAAA,YAAY,CAACG,kBAAD,CAAnB,CACH,CApCD,CAqCA,cAAeF,CAAAA,kBAAf","sourcesContent":["import React from 'react';\nimport AuthUserContext from './context';\nimport { withFirebase } from '../Firebase';\nconst withAuthentication = Component => {\n    class WithAuthentication extends React.Component {\n        constructor(props) {\n            super(props);\n            this.state = {\n                authUser: JSON.parse(localStorage.getItem('authUser')),\n            };\n        }\n\n        componentDidMount() {\n            this.listener = this.props.firebase.onAuthUserListener(\n                authUser => {\n                    //browser's local storage stores the authUser\n                    localStorage.setItem('authUser', JSON.stringify(authUser));\n                    this.setState({ authUser });\n                },\n                () => {\n                    localStorage.removeItem('authUser');\n                    this.setState({ authUser: null });\n                },\n            );\n        }\n\n        render() {\n            return (\n                <AuthUserContext.Provider value={this.state.authUser}>\n                    <Component {...this.props} />\n                </AuthUserContext.Provider>\n            );\n        }\n\n        componentWillUnmount() {\n            this.listener();\n        }\n    }\n    return withFirebase(WithAuthentication);\n};\nexport default withAuthentication;"]},"metadata":{},"sourceType":"module"}